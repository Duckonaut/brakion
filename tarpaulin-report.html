<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
}

.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","duckonaut","repos","brakion","brakion","src","main.rs"],"content":"use std::path::PathBuf;\n\nuse brakion_core::Brakion;\nuse clap::Parser;\nuse colored::Colorize;\n\n#[derive(Debug, Clone, Parser)]\n#[clap(\n    version = \"0.1.0\",\n    author = \"Duckonaut\",\n    about = \"The Brakion Language\"\n)]\nstruct Args {\n    #[clap(help = \"The file to interpret\")]\n    file: PathBuf,\n}\n\nfn main() {\n    let args = Args::parse();\n    let config = brakion_core::Config::default();\n\n    let filepath = args.file;\n\n    let file = std::fs::File::open(filepath.clone()).expect(\"Could not open file\");\n    let mut brakion = Brakion::new(config);\n\n    brakion.add_unit(filepath.to_str().unwrap().to_string(), file);\n\n    let result = brakion.check();\n\n    match result {\n        Ok(_) =\u003e println!(\"{}\", \"No errors found\".green().bold()),\n        Err(errors) =\u003e {\n            println!(\"{} errors found\", errors.len().to_string().red().bold());\n        }\n    }\n}\n","traces":[{"line":18,"address":[402126,402464,401024],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":19,"address":[401031],"length":1,"stats":{"Line":0},"fn_name":null},{"line":20,"address":[401065],"length":1,"stats":{"Line":0},"fn_name":null},{"line":22,"address":[401125],"length":1,"stats":{"Line":0},"fn_name":null},{"line":24,"address":[401242,401178],"length":1,"stats":{"Line":0},"fn_name":null},{"line":25,"address":[401306],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[401414,401482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[401600],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[401627],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[402197,401656],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[401690],"length":1,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[402137,401791,401730],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":12},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","config.rs"],"content":"#[derive(Debug, Clone)]\npub struct Config {\n    pub max_string_length: usize,\n    pub max_identifier_length: usize,\n    pub max_number_length: usize,\n}\n\nimpl Default for Config {\n    fn default() -\u003e Self {\n        Config {\n            max_string_length: 4096,\n            max_identifier_length: 1024,\n            max_number_length: 1024,\n        }\n    }\n}\n","traces":[{"line":9,"address":[422800],"length":1,"stats":{"Line":10},"fn_name":"default"}],"covered":1,"coverable":1},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","errors","lexer.rs"],"content":"use std::fmt::Display;\n\nuse crate::line_endings::LineEndingStyle;\n\n#[derive(Debug, Clone, PartialEq, Eq)]\npub enum LexerError {\n    UnexpectedCharacter(char),\n    UnexpectedEndOfFile,\n    UnterminatedStringLiteral,\n    UnterminatedCharLiteral,\n    EmptyCharLiteral,\n    CharLiteralNotOneChar,\n    CharLiteralTooLong,\n    InvalidEscapeSequence(char),\n    StringTooLong,\n    NumberTooLong,\n    IdentifierTooLong,\n    InconsistentLineEndings(LineEndingStyle, LineEndingStyle),\n}\n\nimpl LexerError {\n    // Whether the lexer should stop processing the file after this error.\n    pub fn is_fatal(\u0026self) -\u003e bool {\n        match self {\n            Self::UnexpectedCharacter(c) =\u003e *c == '\\0', // Null terminator is probably a bad sign.\n            Self::UnexpectedEndOfFile =\u003e true,          // EOF is EOF.\n            Self::UnterminatedStringLiteral =\u003e true,    // String parsing is greedy, this basically\n            // means EOF was encountered.\n            Self::UnterminatedCharLiteral =\u003e true, // Same as above.\n            Self::EmptyCharLiteral =\u003e false,       // Empty character literals are allowed.\n            Self::CharLiteralNotOneChar =\u003e false, // This means the character literal is too long, but parsable\n            Self::CharLiteralTooLong =\u003e true, // This means the character literal is too long to\n                                              // parse. Stop to avoid infinite loops.\n            Self::InvalidEscapeSequence(_) =\u003e false, // Invalid escape sequences don't mean\n                                                     // everything is broken.\n            Self::StringTooLong =\u003e true, // This means the string literal is too long to parse.\n                                         // Stop to avoid infinite loops.\n            Self::NumberTooLong =\u003e true, // Same as above.\n            Self::IdentifierTooLong =\u003e true, // Same as above.\n            Self::InconsistentLineEndings(_, _) =\u003e false, // An error, but probably not fatal.\n        }\n    }\n}\n\nimpl Display for LexerError {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            Self::UnexpectedCharacter(c) =\u003e write!(f, \"Unexpected character '{}'\", c),\n            Self::UnexpectedEndOfFile =\u003e write!(f, \"Unexpected end of file\"),\n            Self::UnterminatedStringLiteral =\u003e write!(f, \"Unterminated string literal\"),\n            Self::UnterminatedCharLiteral =\u003e write!(f, \"Unterminated character literal\"),\n            Self::EmptyCharLiteral =\u003e write!(f, \"Empty character literal\"),\n            Self::CharLiteralTooLong =\u003e write!(f, \"Character literal too long\"),\n            Self::CharLiteralNotOneChar =\u003e write!(f, \"Character literal not one character\"),\n            Self::InvalidEscapeSequence(c) =\u003e write!(f, \"Invalid escape sequence '\\\\{}'\", c),\n            Self::StringTooLong =\u003e write!(f, \"String literal too long\"),\n            Self::NumberTooLong =\u003e write!(f, \"Number too long\"),\n            Self::IdentifierTooLong =\u003e write!(f, \"Identifier too long\"),\n            Self::InconsistentLineEndings(expected, actual) =\u003e {\n                write!(\n                    f,\n                    \"Inconsistent line endings: expected {}, encountered {}\",\n                    expected, actual\n                )\n            }\n        }\n    }\n}\n","traces":[{"line":23,"address":[2829056],"length":1,"stats":{"Line":1},"fn_name":"is_fatal"},{"line":24,"address":[2829069],"length":1,"stats":{"Line":2},"fn_name":null},{"line":25,"address":[2829104],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[2829131],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[2829138],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[2829145],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[2829152],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[2829159],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[2829166],"length":1,"stats":{"Line":1},"fn_name":null},{"line":34,"address":[413701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[413708],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[413715],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[2829194],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[2829201],"length":1,"stats":{"Line":0},"fn_name":null},{"line":46,"address":[2829232],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":47,"address":[2829265],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[2829301],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[413918],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[2829458],"length":1,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[414052],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[414119],"length":1,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[414253],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[414186],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[414325],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[414435],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[414502],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[414569],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[414641],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[414668],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":11,"coverable":29},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","errors.rs"],"content":"use colored::Colorize;\n\nuse crate::unit::Span;\n\nuse self::lexer::LexerError;\n\npub mod lexer;\n\npub type ErrorModuleRef = std::sync::Arc\u003cstd::sync::Mutex\u003cErrorModule\u003e\u003e;\n\n#[derive(Debug)]\npub struct ErrorModule {\n    pub errors: Vec\u003cError\u003e,\n}\n\nimpl ErrorModule {\n    pub fn new() -\u003e Self {\n        Self { errors: Vec::new() }\n    }\n\n    pub fn new_ref() -\u003e ErrorModuleRef {\n        std::sync::Arc::new(std::sync::Mutex::new(Self::new()))\n    }\n\n    pub fn add_error(\u0026mut self, kind: ErrorKind, level: ErrorLevel, span: Option\u003cSpan\u003e) {\n        self.errors.push(Error { kind, level, span });\n    }\n\n    pub fn add_lexer_error(\u0026mut self, kind: LexerError, span: Option\u003cSpan\u003e) {\n        self.add_error(ErrorKind::LexerError(kind), ErrorLevel::Error, span);\n    }\n\n    pub fn add_error_if_first(\u0026mut self, kind: ErrorKind, level: ErrorLevel, span: Option\u003cSpan\u003e) {\n        if !self.errors.iter().any(|e| e.kind == kind) {\n            self.add_error(kind, level, span);\n        }\n    }\n\n    pub fn add_lexer_error_if_first(\u0026mut self, kind: LexerError, span: Option\u003cSpan\u003e) {\n        self.add_error_if_first(ErrorKind::LexerError(kind), ErrorLevel::Error, span);\n    }\n\n    pub fn unrecoverable(\u0026self) -\u003e bool {\n        self.errors.iter().any(|e| e.level == ErrorLevel::Error)\n    }\n\n    pub fn errors(\u0026self) -\u003e Vec\u003cError\u003e {\n        self.errors.clone()\n    }\n\n    pub fn dump(\u0026self, units: \u0026mut crate::unit::Units) {\n        let mut sink = std::io::stderr().lock();\n\n        for error in \u0026self.errors {\n            self.print_error(\u0026mut sink, error, units).unwrap();\n        }\n    }\n\n    fn print_error(\n        \u0026self,\n        mut f: impl std::io::Write,\n        error: \u0026Error,\n        units: \u0026mut crate::unit::Units,\n    ) -\u003e std::io::Result\u003c()\u003e {\n        match \u0026error.kind {\n            ErrorKind::LexerError(e) =\u003e writeln!(f, \"{}: {}\", \"lexer error\".red(), e)?,\n        };\n\n        if error.span.is_none() {\n            writeln!(f)?;\n            return Ok(());\n        }\n\n        let span = error.span.unwrap();\n        let unit = units.get_mut(span.unit).unwrap();\n        let file = unit.name();\n\n        writeln!(\n            f,\n            \"{} {}:{} in {}\",\n            \" --\u003e\".bright_blue(),\n            span.start.line,\n            span.start.column,\n            file,\n        )?;\n        let line_max_len = std::cmp::max(\n            span.start.line.to_string().len(),\n            span.end.line.to_string().len(),\n        );\n        let context = unit.lines(\u0026span);\n\n        if context.is_empty() {\n            writeln!(f, \"{} {}\", span.start.line, \" |\".bright_blue())\n        } else {\n            let padding = format!(\"{}{} \", \" \".repeat(line_max_len), \" |\".bright_blue());\n\n            writeln!(f, \"{padding}\")?;\n            for (line_index, line) in context.iter().enumerate() {\n                let line_index = line_index + span.start.line;\n                let line_num = format!(\"{line_index: \u003eline_max_len$} |\").bright_blue();\n\n                writeln!(f, \"{line_num} {line}\")?;\n                if line_index == span.start.line \u0026\u0026 line_index == span.end.line {\n                    write!(f, \"{padding}\")?;\n                    writeln!(\n                        f,\n                        \"{}{}\",\n                        \" \".repeat(span.start.column - 1),\n                        \"^\".repeat(span.end.column - span.start.column).bright_red()\n                    )?;\n                } else if line_index == span.start.line {\n                    write!(f, \"{padding}\")?;\n                    writeln!(\n                        f,\n                        \"{}{}\",\n                        \" \".repeat(span.start.column - 1),\n                        \"^\".repeat(line.len() - span.start.column + 1).bright_red()\n                    )?;\n                } else if line_index == span.end.line {\n                    write!(f, \"{padding}\")?;\n                    writeln!(f, \"{}\", \"^\".repeat(span.end.column).bright_red())?;\n                } else {\n                    write!(f, \"{padding}\")?;\n                    writeln!(f, \"{}\", \"^\".repeat(line.len()).bright_red())?;\n                }\n            }\n            writeln!(f, \"{padding}\")?;\n            Ok(())\n        }\n    }\n}\n\nimpl Default for ErrorModule {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[derive(Debug, Clone, PartialEq, Eq)]\npub enum ErrorKind {\n    LexerError(LexerError),\n}\n\n#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]\npub enum ErrorLevel {\n    Warning,\n    Error,\n}\n\n#[derive(Debug, Clone)]\npub struct Error {\n    pub kind: ErrorKind,\n    pub level: ErrorLevel,\n    pub span: Option\u003cSpan\u003e,\n}\n","traces":[{"line":17,"address":[230560],"length":1,"stats":{"Line":10},"fn_name":"new"},{"line":18,"address":[230573],"length":1,"stats":{"Line":12},"fn_name":null},{"line":21,"address":[230624],"length":1,"stats":{"Line":10},"fn_name":"new_ref"},{"line":22,"address":[230628],"length":1,"stats":{"Line":12},"fn_name":null},{"line":25,"address":[230672],"length":1,"stats":{"Line":6},"fn_name":"add_error"},{"line":26,"address":[230735],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[230848],"length":1,"stats":{"Line":6},"fn_name":"add_lexer_error"},{"line":30,"address":[230896],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[230976],"length":1,"stats":{"Line":1},"fn_name":"add_error_if_first"},{"line":34,"address":[256665,256640],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":35,"address":[231099],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[231168],"length":1,"stats":{"Line":1},"fn_name":"add_lexer_error_if_first"},{"line":40,"address":[231216],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[231296],"length":1,"stats":{"Line":0},"fn_name":"unrecoverable"},{"line":44,"address":[231305],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[231360],"length":1,"stats":{"Line":0},"fn_name":"errors"},{"line":48,"address":[231377],"length":1,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[231660,231392],"length":1,"stats":{"Line":0},"fn_name":"dump"},{"line":52,"address":[231419],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[231606,231515,231457],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[231624],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[256752,256850,257318],"length":1,"stats":{"Line":0},"fn_name":"print_error\u003c\u0026mut std::io::stdio::StderrLock\u003e"},{"line":65,"address":[256807],"length":1,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[256811,256895],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[257342],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[257457,257612],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[257595],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[257377],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[257679],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[257787],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[258440,257980,257881],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[257842],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[258500],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[258590],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[258786],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[258801,258862],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[258910,259111],"length":1,"stats":{"Line":0},"fn_name":null},{"line":95,"address":[259276,258868],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[259855,259772,260042],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[260019,260134,260385],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[260487,260417],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[260551,260464],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[261252,260942],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[261328,261232],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[261640,261411],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[261779,262076,262175,262382],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[261604,261707],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[262049,261846],"length":1,"stats":{"Line":0},"fn_name":null},{"line":111,"address":[261376],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[262804,262575],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[262943,263357,263456,263663],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[262768,262871],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[263330,263042],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[262540],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[264076,263844],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[264143,264037],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[264638,264800,263810],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[264780,264858],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[265531,260359,265353],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[265497],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[231696],"length":1,"stats":{"Line":0},"fn_name":"default"},{"line":135,"address":[231704],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":13,"coverable":62},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","filters.rs"],"content":"use crate::{\n    lexer::TokenProducer,\n    tokens::{Token, TokenKind},\n};\n\npub struct ParserTokenFilter\u003c'u, T\u003e\nwhere\n    T: TokenProducer,\n{\n    tokens: \u0026'u mut T,\n}\n\nimpl\u003c'u, T\u003e ParserTokenFilter\u003c'u, T\u003e\nwhere\n    T: TokenProducer,\n{\n    pub fn new(tokens: \u0026'u mut T) -\u003e Self {\n        Self { tokens }\n    }\n}\n\nimpl\u003c'u, T\u003e TokenProducer for ParserTokenFilter\u003c'u, T\u003e\nwhere\n    T: TokenProducer,\n{\n    fn next(\u0026mut self) -\u003e Option\u003cToken\u003e {\n        let mut token = self.tokens.next();\n\n        while let Some(Token {\n            kind: TokenKind::Comment(_),\n            ..\n        }) = token\n        {\n            token = self.tokens.next();\n        }\n\n        token\n    }\n}\n","traces":[{"line":17,"address":[393424],"length":1,"stats":{"Line":1},"fn_name":"new\u003cbrakion_core::lexer::Lexer\u003e"},{"line":26,"address":[393685,393456],"length":1,"stats":{"Line":1},"fn_name":"next\u003cbrakion_core::lexer::Lexer\u003e"},{"line":27,"address":[393489],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[393680,393502],"length":1,"stats":{"Line":2},"fn_name":null},{"line":30,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[393609,393555],"length":1,"stats":{"Line":2},"fn_name":null},{"line":37,"address":[],"length":0,"stats":{"Line":0},"fn_name":null}],"covered":5,"coverable":9},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","lexer.rs"],"content":"use crate::config::Config;\nuse crate::errors::lexer::LexerError;\nuse crate::errors::ErrorModuleRef;\nuse crate::line_endings::LineEndingStyle;\nuse crate::tokens::Token;\nuse crate::tokens::TokenKind;\nuse crate::unit::Location;\nuse crate::unit::Span;\nuse crate::unit::Unit;\n\n// Macro for trying to match with multiple functions\n// If a function returns a token, the token is returned\n// If a function returns an error, the error is returned\n// If a function returns None, the next function is tried\nmacro_rules! try_all_paths {\n    () =\u003e {\n        TokenizeResult::None\n    };\n    ($e:expr) =\u003e {\n        $e\n    };\n    ($head:expr $(,$tail:expr)* $(,)?) =\u003e {\n        match $head {\n            TokenizeResult::Some(t) =\u003e TokenizeResult::Some(t),\n            TokenizeResult::Error(e) =\u003e TokenizeResult::Error(e),\n            TokenizeResult::None =\u003e try_all_paths!($($tail,)*),\n        }\n    };\n}\n\npub trait TokenProducer {\n    fn next(\u0026mut self) -\u003e Option\u003cToken\u003e;\n}\n\n#[derive(Debug)]\npub struct Lexer\u003c'a\u003e {\n    // Refs to other modules\n    config: \u0026'a Config,\n    unit: \u0026'a mut Unit,\n    error_module: ErrorModuleRef,\n    // Current character\n    current: Option\u003cchar\u003e,\n    // Positioning\n    start: usize,\n    current_pos: usize,\n    current_pos_in_bytes: usize,\n    start_line: usize,\n    start_line_start_in_bytes: usize,\n    current_line: usize,\n    current_line_start_in_bytes: usize,\n    start_column: usize,\n    current_column: usize,\n    // Line ending style\n    line_ending_style: LineEndingStyle,\n    // EOF\n    emitted_eof: bool,\n}\n\n#[derive(Debug)]\nenum TokenizeResult {\n    // A token was produced\n    Some(Token),\n    // No valid token found\n    None,\n    // An error occurred\n    Error(LexerError),\n}\n\nimpl\u003c'a\u003e Lexer\u003c'a\u003e {\n    pub fn new(unit: \u0026'a mut Unit, config: \u0026'a Config, error_module: ErrorModuleRef) -\u003e Self {\n        let current = unit.read();\n        Self {\n            config,\n            unit,\n            error_module,\n            current,\n            start: 0,\n            current_pos: 0,\n            current_pos_in_bytes: 0,\n            start_line: 1,\n            start_line_start_in_bytes: 0,\n            current_line: 1,\n            current_line_start_in_bytes: 0,\n            start_column: 1,\n            current_column: 1,\n            line_ending_style: LineEndingStyle::Unknown,\n            emitted_eof: false,\n        }\n    }\n\n    pub fn next_token(\u0026mut self) -\u003e Option\u003cToken\u003e {\n        self.skip_whitespace();\n        self.start = self.current_pos;\n        self.start_line = self.current_line;\n        self.start_column = self.current_column;\n        self.start_line_start_in_bytes = self.current_line_start_in_bytes;\n\n        let token = try_all_paths!(\n            self.single_char_token(),\n            self.double_char_token(),\n            self.string(),\n            self.char(),\n            self.comment(),\n            self.number(),\n            self.identifier_or_keyword(),\n        );\n\n        match token {\n            TokenizeResult::Some(token) =\u003e Some(token),\n            TokenizeResult::Error(error) =\u003e {\n                let fatal = error.is_fatal();\n                self.error_module\n                    .lock()\n                    .unwrap()\n                    .add_lexer_error(error, self.span());\n\n                if fatal {\n                    None\n                } else {\n                    // Try to recover\n                    self.next_token()\n                }\n            }\n            TokenizeResult::None =\u003e match self.current {\n                Some(c) =\u003e {\n                    self.advance();\n\n                    self.error_module\n                        .lock()\n                        .unwrap()\n                        .add_lexer_error(LexerError::UnexpectedCharacter(c), self.span());\n\n                    // Try to recover, should be able to skip the unexpected character?\n                    self.next_token()\n                }\n                None =\u003e {\n                    if self.emitted_eof {\n                        None\n                    } else {\n                        self.emitted_eof = true;\n                        Some(Token::new(TokenKind::Eof, None))\n                    }\n                }\n            },\n        }\n    }\n\n    fn increment_line(\u0026mut self) {\n        self.current_line += 1;\n        self.current_column = 1;\n        self.current_line_start_in_bytes = self.current_pos_in_bytes;\n    }\n\n    fn signal_inconsistent_line_ending(\u0026mut self, encountered: LineEndingStyle) {\n        self.error_module.lock().unwrap().add_lexer_error_if_first(\n            LexerError::InconsistentLineEndings(self.line_ending_style, encountered),\n            None,\n        );\n    }\n\n    fn handle_line_ending(\u0026mut self) -\u003e LineEndingStyle {\n        let encountered = LineEndingStyle::get_line_ending(\n            \u0026mut *self,\n            |s| s.current,\n            |s| {\n                s.advance();\n            },\n        )\n        .unwrap(); // Handle line ending is only called when a line ending starts.\n\n        self.increment_line();\n\n        if self.line_ending_style == LineEndingStyle::Unknown {\n            self.line_ending_style = encountered;\n        } else if self.line_ending_style != encountered {\n            self.signal_inconsistent_line_ending(encountered);\n        }\n\n        encountered\n    }\n\n    fn skip_whitespace(\u0026mut self) {\n        while let Some(c) = self.current {\n            match c {\n                ' ' | '\\t' =\u003e {\n                    self.advance();\n                }\n                '\\n' | '\\r' =\u003e {\n                    self.handle_line_ending();\n                    self.start_line = self.current_line;\n                    self.start_column = self.current_column;\n                }\n                _ =\u003e break,\n            }\n        }\n    }\n\n    fn single_char_token_case(\u0026mut self, c: char, kind: TokenKind) -\u003e TokenizeResult {\n        if self.current == Some(c) {\n            self.advance();\n            TokenizeResult::Some(Token::new(kind, self.span()))\n        } else {\n            TokenizeResult::None\n        }\n    }\n\n    fn single_char_token(\u0026mut self) -\u003e TokenizeResult {\n        try_all_paths!(\n            self.single_char_token_case('(', TokenKind::LeftParen),\n            self.single_char_token_case(')', TokenKind::RightParen),\n            self.single_char_token_case('{', TokenKind::LeftBrace),\n            self.single_char_token_case('}', TokenKind::RightBrace),\n            self.single_char_token_case('[', TokenKind::LeftBracket),\n            self.single_char_token_case(']', TokenKind::RightBracket),\n            self.single_char_token_case(',', TokenKind::Comma),\n            self.single_char_token_case('.', TokenKind::Dot),\n            self.single_char_token_case('+', TokenKind::Plus),\n            self.single_char_token_case(';', TokenKind::Semicolon),\n            self.single_char_token_case('/', TokenKind::Slash),\n            self.single_char_token_case('*', TokenKind::Star),\n            self.single_char_token_case('|', TokenKind::Pipe),\n            self.single_char_token_case('?', TokenKind::Question),\n        )\n    }\n\n    fn double_char_token_case(\n        \u0026mut self,\n        first: char,\n        second: char,\n        short: TokenKind,\n        long: TokenKind,\n    ) -\u003e TokenizeResult {\n        if self.match_char(first) {\n            if self.match_char(second) {\n                TokenizeResult::Some(Token::new(long, self.span()))\n            } else {\n                TokenizeResult::Some(Token::new(short, self.span()))\n            }\n        } else {\n            TokenizeResult::None\n        }\n    }\n\n    fn double_char_token(\u0026mut self) -\u003e TokenizeResult {\n        try_all_paths!(\n            self.double_char_token_case(':', ':', TokenKind::Colon, TokenKind::DoubleColon),\n            self.double_char_token_case('-', '\u003e', TokenKind::Minus, TokenKind::Arrow),\n            self.double_char_token_case('!', '=', TokenKind::Bang, TokenKind::BangEqual),\n            self.double_char_token_case('=', '=', TokenKind::Equal, TokenKind::EqualEqual),\n            self.double_char_token_case('\u003c', '=', TokenKind::Less, TokenKind::LessEqual),\n            self.double_char_token_case('\u003e', '=', TokenKind::Greater, TokenKind::GreaterEqual),\n        )\n    }\n\n    fn string(\u0026mut self) -\u003e TokenizeResult {\n        if !self.match_char('\"') {\n            return TokenizeResult::None;\n        }\n\n        let mut text = String::new();\n\n        while let Some(c) = self.current {\n            if c == '\\n' || c == '\\r' {\n                let line_ending = self.handle_line_ending();\n\n                text.push_str(line_ending.as_str());\n                continue;\n            }\n\n            if c == '\"' {\n                self.advance();\n                return TokenizeResult::Some(Token::new(TokenKind::String(text), self.span()));\n            }\n\n            // Handle escape sequences, but don't escape them yet.\n            if c == '\\\\' {\n                text.push(c);\n                self.advance();\n                if self.current.is_none() {\n                    return TokenizeResult::Error(LexerError::UnterminatedStringLiteral);\n                }\n\n                match self.current.unwrap() {\n                    'n' | 'r' | 't' | '\\\\' | '\"' | '\\'' | '0' =\u003e text.push(self.current.unwrap()),\n                    c =\u003e {\n                        text.push(c);\n                        let mut error_span = self.span().unwrap();\n                        error_span.start.line = error_span.end.line;\n                        error_span.start.column = error_span.end.column - 1;\n\n                        self.error_module.lock().unwrap().add_lexer_error(\n                            LexerError::InvalidEscapeSequence(c),\n                            Some(error_span),\n                        );\n                    }\n                }\n            } else {\n                text.push(c);\n            }\n\n            if self.current_pos - self.start \u003e self.config.max_string_length {\n                return TokenizeResult::Error(LexerError::StringTooLong);\n            }\n\n            self.advance();\n        }\n        TokenizeResult::Error(LexerError::UnterminatedStringLiteral)\n    }\n\n    fn char(\u0026mut self) -\u003e TokenizeResult {\n        if !self.match_char('\\'') {\n            return TokenizeResult::None;\n        }\n\n        if self.current.is_none() {\n            return TokenizeResult::Error(LexerError::UnterminatedCharLiteral);\n        }\n\n        if self.current == Some('\\'') {\n            self.advance();\n            return TokenizeResult::Error(LexerError::EmptyCharLiteral);\n        }\n\n        let mut content = self.current.unwrap();\n\n        if self.current == Some('\\\\') {\n            self.advance();\n            if self.current.is_none() {\n                return TokenizeResult::Error(LexerError::UnterminatedCharLiteral);\n            }\n\n            // Handle escape sequences in the lexer for chars\n            // As opposed to strings, where we can just handle them in the parser,\n            // we need to handle them here to stora as a rust char literal.\n            content = match self.current.unwrap() {\n                'n' =\u003e '\\n',\n                'r' =\u003e '\\r',\n                't' =\u003e '\\t',\n                '0' =\u003e '\\0',\n                '\\'' =\u003e '\\'',\n                '\\\\' =\u003e '\\\\',\n                c =\u003e {\n                    self.advance(); // Try to consume the char\n                    self.advance(); // Try to consume the '\n                    return TokenizeResult::Error(LexerError::InvalidEscapeSequence(c));\n                }\n            };\n        }\n\n        self.advance();\n\n        if self.match_char('\\'') {\n            return TokenizeResult::Some(Token::new(TokenKind::Char(content), self.span()));\n        }\n\n        while !self.match_char('\\'') \u0026\u0026 self.current_pos - self.start \u003c= self.config.max_string_length {\n            self.advance();\n            if self.current.is_none() {\n                return TokenizeResult::Error(LexerError::UnterminatedCharLiteral);\n            }\n        }\n\n        if self.current_pos - self.start \u003e self.config.max_string_length {\n            return TokenizeResult::Error(LexerError::CharLiteralTooLong);\n        }\n\n        TokenizeResult::Error(LexerError::CharLiteralNotOneChar)\n    }\n\n    fn comment(\u0026mut self) -\u003e TokenizeResult {\n        if !self.match_char('#') {\n            return TokenizeResult::None;\n        }\n\n        let mut comment = String::new();\n\n        loop {\n            let c = self.current;\n            self.advance();\n\n            if self.current == Some('\\n') || self.current == Some('\\r') {\n                comment.push(c.unwrap());\n\n                self.handle_line_ending();\n                self.start_line = self.current_line;\n                self.start_column = self.current_column;\n\n                return TokenizeResult::Some(Token::new(TokenKind::Comment(comment), self.span()));\n            }\n\n            if c.is_none() {\n                return TokenizeResult::Some(Token::new(TokenKind::Comment(comment), self.span()));\n            }\n\n            comment.push(c.unwrap());\n        }\n    }\n\n    fn number(\u0026mut self) -\u003e TokenizeResult {\n        if self.current.is_none() || !self.current.unwrap().is_ascii_digit() {\n            return TokenizeResult::None;\n        }\n\n        // Store u64 first, then convert to f64 if longer than len(u64::MAX)\n        let mut number: TokenKind = TokenKind::Integer(0);\n        let mut number_len = 0;\n\n        while let Some(c) = self.current {\n            if number_len \u003e self.config.max_number_length {\n                return TokenizeResult::Error(LexerError::NumberTooLong);\n            }\n            if c.is_ascii_digit() {\n                let digit = c.to_digit(10).unwrap();\n\n                match number {\n                    TokenKind::Integer(ref mut ni) =\u003e {\n                        match ni.checked_mul(10) {\n                            Some(n) =\u003e match n.checked_add(digit as u64) {\n                                Some(n) =\u003e *ni = n,\n                                None =\u003e number = TokenKind::Float(n as f64 + digit as f64),\n                            },\n                            None =\u003e {\n                                number = TokenKind::Float((*ni as f64).mul_add(10.0, digit as f64))\n                            }\n                        };\n                    }\n                    TokenKind::Float(ref mut n) =\u003e {\n                        *n = n.mul_add(10.0, digit as f64);\n                    }\n                    _ =\u003e unreachable!(),\n                }\n                self.advance();\n                number_len += 1;\n            } else {\n                break;\n            }\n        }\n        if let Some(c) = self.current {\n            if c == '.' {\n                self.advance();\n                let mut fraction = 0.1;\n\n                while let Some(c) = self.current {\n                    if number_len \u003e self.config.max_number_length {\n                        return TokenizeResult::Error(LexerError::NumberTooLong);\n                    }\n                    if let TokenKind::Integer(n) = number {\n                        number = TokenKind::Float(n as f64);\n                    }\n\n                    if let TokenKind::Float(ref mut n) = number {\n                        if c.is_ascii_digit() {\n                            let digit = c.to_digit(10).unwrap();\n                            *n += digit as f64 * fraction;\n                            self.advance();\n                            fraction *= 0.1;\n                            number_len += 1;\n                        } else {\n                            break;\n                        }\n                    } else {\n                        unreachable!();\n                    }\n                }\n                return TokenizeResult::Some(Token::new(number, self.span()));\n            }\n        }\n        TokenizeResult::Some(Token::new(number, self.span()))\n    }\n\n    fn identifier_or_keyword(\u0026mut self) -\u003e TokenizeResult {\n        if self.current.is_none() || !Self::is_valid_identifier_start(self.current.unwrap()) {\n            return TokenizeResult::None;\n        }\n\n        let mut text = String::new();\n\n        while let Some(c) = self.current {\n            if Self::is_valid_in_identifier(c) {\n                text.push(c);\n                self.advance();\n            } else {\n                break;\n            }\n\n            if self.current_pos - self.start \u003e self.config.max_identifier_length {\n                return TokenizeResult::Error(LexerError::IdentifierTooLong);\n            }\n        }\n\n        let kind = match text.as_str() {\n            \"pub\" =\u003e TokenKind::Pub,\n            \"mod\" =\u003e TokenKind::Mod,\n            \"fn\" =\u003e TokenKind::Fn,\n            \"type\" =\u003e TokenKind::Type,\n            \"trait\" =\u003e TokenKind::Trait,\n            \"impl\" =\u003e TokenKind::Impl,\n            \"var\" =\u003e TokenKind::Var,\n            \"and\" =\u003e TokenKind::And,\n            \"or\" =\u003e TokenKind::Or,\n            \"for\" =\u003e TokenKind::For,\n            \"in\" =\u003e TokenKind::In,\n            \"if\" =\u003e TokenKind::If,\n            \"else\" =\u003e TokenKind::Else,\n            \"while\" =\u003e TokenKind::While,\n            \"match\" =\u003e TokenKind::Match,\n            \"on\" =\u003e TokenKind::On,\n            \"break\" =\u003e TokenKind::Break,\n            \"continue\" =\u003e TokenKind::Continue,\n            \"return\" =\u003e TokenKind::Return,\n            \"true\" =\u003e TokenKind::True,\n            \"false\" =\u003e TokenKind::False,\n            \"void\" =\u003e TokenKind::Void,\n            _ =\u003e TokenKind::Identifier(text.to_string()),\n        };\n        TokenizeResult::Some(Token::new(kind, self.span()))\n    }\n\n    fn advance(\u0026mut self) -\u003e Option\u003cchar\u003e {\n        self.current = self.unit.read();\n        self.current_pos += 1;\n        self.current_pos_in_bytes += self.current.map_or(0, |c| c.len_utf8());\n        self.current_column += 1;\n        self.current\n    }\n\n    fn span(\u0026self) -\u003e Option\u003cSpan\u003e {\n        Some(Span::new(\n            self.unit.id,\n            Location::new(\n                self.start_line,\n                self.start_line_start_in_bytes,\n                self.start_column,\n            ),\n            Location::new(\n                self.current_line,\n                self.current_line_start_in_bytes,\n                self.current_column,\n            ),\n        ))\n    }\n\n    fn match_char(\u0026mut self, c: char) -\u003e bool {\n        if self.current == Some(c) {\n            self.advance();\n            true\n        } else {\n            false\n        }\n    }\n\n    fn is_valid_in_identifier(c: char) -\u003e bool {\n        Self::is_valid_identifier_start(c) || c.is_numeric()\n    }\n\n    fn is_valid_identifier_start(c: char) -\u003e bool {\n        c.is_alphabetic() || c == '_' // TODO: Support some more unicode characters\n                                      //       like emojis (or even emoji modifier sequences?)\n    }\n}\n\nimpl\u003c'a\u003e TokenProducer for Lexer\u003c'a\u003e {\n    fn next(\u0026mut self) -\u003e Option\u003cToken\u003e {\n        self.next_token()\n    }\n}\n\nimpl\u003cI\u003e TokenProducer for I\nwhere\n    I: Iterator\u003cItem = Token\u003e,\n{\n    fn next(\u0026mut self) -\u003e Option\u003cToken\u003e {\n        Iterator::next(self)\n    }\n}\n","traces":[{"line":70,"address":[281808,282027],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":71,"address":[281919,281854],"length":1,"stats":{"Line":12},"fn_name":null},{"line":91,"address":[285010,284484,282064],"length":1,"stats":{"Line":1},"fn_name":"next_token"},{"line":92,"address":[282114],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[282135],"length":1,"stats":{"Line":1},"fn_name":null},{"line":94,"address":[282142],"length":1,"stats":{"Line":2},"fn_name":null},{"line":95,"address":[282150],"length":1,"stats":{"Line":9},"fn_name":null},{"line":96,"address":[282158],"length":1,"stats":{"Line":2},"fn_name":null},{"line":98,"address":[283300,282703,282951,283790,282810,282211,282241,283196,283441,283545,283055,283686,282559,282385],"length":1,"stats":{"Line":30},"fn_name":null},{"line":99,"address":[282174,282239],"length":1,"stats":{"Line":10},"fn_name":null},{"line":100,"address":[282557,282348],"length":1,"stats":{"Line":10},"fn_name":null},{"line":101,"address":[282808,282666],"length":1,"stats":{"Line":10},"fn_name":null},{"line":102,"address":[283053,282917],"length":1,"stats":{"Line":2},"fn_name":null},{"line":103,"address":[283298,283162],"length":1,"stats":{"Line":3},"fn_name":null},{"line":104,"address":[283543,283407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[283788,283652],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[282489,283979],"length":1,"stats":{"Line":1},"fn_name":null},{"line":109,"address":[283981],"length":1,"stats":{"Line":1},"fn_name":null},{"line":110,"address":[284113],"length":1,"stats":{"Line":2},"fn_name":null},{"line":111,"address":[284137,284242],"length":1,"stats":{"Line":3},"fn_name":null},{"line":112,"address":[284251,284446],"length":1,"stats":{"Line":2},"fn_name":null},{"line":115,"address":[284370,284477],"length":1,"stats":{"Line":6},"fn_name":null},{"line":117,"address":[284499],"length":1,"stats":{"Line":1},"fn_name":null},{"line":118,"address":[284536],"length":1,"stats":{"Line":3},"fn_name":null},{"line":121,"address":[284567,284521],"length":1,"stats":{"Line":4},"fn_name":null},{"line":124,"address":[284080],"length":1,"stats":{"Line":1},"fn_name":null},{"line":125,"address":[284600],"length":1,"stats":{"Line":1},"fn_name":null},{"line":126,"address":[284614],"length":1,"stats":{"Line":1},"fn_name":null},{"line":128,"address":[284629,284827],"length":1,"stats":{"Line":2},"fn_name":null},{"line":131,"address":[284858,284748],"length":1,"stats":{"Line":1},"fn_name":null},{"line":134,"address":[284881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":136,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[284577,284974,285005],"length":1,"stats":{"Line":3},"fn_name":null},{"line":138,"address":[284967],"length":1,"stats":{"Line":1},"fn_name":null},{"line":140,"address":[284901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":141,"address":[284905,284987],"length":1,"stats":{"Line":2},"fn_name":null},{"line":148,"address":[285056],"length":1,"stats":{"Line":2},"fn_name":"increment_line"},{"line":149,"address":[285123,285069],"length":1,"stats":{"Line":2},"fn_name":null},{"line":150,"address":[285102],"length":1,"stats":{"Line":2},"fn_name":null},{"line":151,"address":[285110],"length":1,"stats":{"Line":2},"fn_name":null},{"line":154,"address":[285380,285168],"length":1,"stats":{"Line":1},"fn_name":"signal_inconsistent_line_ending"},{"line":155,"address":[285202,285345],"length":1,"stats":{"Line":2},"fn_name":null},{"line":156,"address":[285320],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[285336],"length":1,"stats":{"Line":1},"fn_name":null},{"line":161,"address":[285408],"length":1,"stats":{"Line":2},"fn_name":"handle_line_ending"},{"line":163,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[390253,390240],"length":1,"stats":{"Line":4},"fn_name":"{closure#0}"},{"line":165,"address":[390272],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":166,"address":[390297],"length":1,"stats":{"Line":2},"fn_name":null},{"line":171,"address":[285449],"length":1,"stats":{"Line":2},"fn_name":null},{"line":173,"address":[285458],"length":1,"stats":{"Line":2},"fn_name":null},{"line":174,"address":[285506],"length":1,"stats":{"Line":2},"fn_name":null},{"line":175,"address":[285482],"length":1,"stats":{"Line":1},"fn_name":null},{"line":176,"address":[285526],"length":1,"stats":{"Line":1},"fn_name":null},{"line":179,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[285552],"length":1,"stats":{"Line":9},"fn_name":"skip_whitespace"},{"line":183,"address":[285571],"length":1,"stats":{"Line":2},"fn_name":null},{"line":184,"address":[285607],"length":1,"stats":{"Line":8},"fn_name":null},{"line":185,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":186,"address":[285653],"length":1,"stats":{"Line":1},"fn_name":null},{"line":188,"address":[285691],"length":1,"stats":{"Line":1},"fn_name":null},{"line":189,"address":[285665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[285675],"length":1,"stats":{"Line":1},"fn_name":null},{"line":191,"address":[285683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":193,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":198,"address":[286059,285696],"length":1,"stats":{"Line":2},"fn_name":"single_char_token_case"},{"line":199,"address":[285746,285857,286039,285839],"length":1,"stats":{"Line":15},"fn_name":null},{"line":200,"address":[285867],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[285884,286049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":203,"address":[285850],"length":1,"stats":{"Line":10},"fn_name":null},{"line":207,"address":[286144],"length":1,"stats":{"Line":2},"fn_name":"single_char_token"},{"line":208,"address":[286684,288385,287505,286433,286282,286536,286252,287170,287748,288720,288234,288871,287991,289114,286927,288142,289357,289206,287019,288477,287899,289449,287413,288628,288963,287656,286776,287262],"length":1,"stats":{"Line":155},"fn_name":null},{"line":209,"address":[286280,286183],"length":1,"stats":{"Line":10},"fn_name":null},{"line":210,"address":[286534,286367],"length":1,"stats":{"Line":2},"fn_name":null},{"line":211,"address":[286774,286618],"length":1,"stats":{"Line":2},"fn_name":null},{"line":212,"address":[286861,287017],"length":1,"stats":{"Line":2},"fn_name":null},{"line":213,"address":[287260,287104],"length":1,"stats":{"Line":2},"fn_name":null},{"line":214,"address":[287503,287347],"length":1,"stats":{"Line":2},"fn_name":null},{"line":215,"address":[287746,287590],"length":1,"stats":{"Line":2},"fn_name":null},{"line":216,"address":[287989,287833],"length":1,"stats":{"Line":2},"fn_name":null},{"line":217,"address":[288076,288232],"length":1,"stats":{"Line":2},"fn_name":null},{"line":218,"address":[288475,288319],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[288718,288562],"length":1,"stats":{"Line":2},"fn_name":null},{"line":220,"address":[288961,288805],"length":1,"stats":{"Line":2},"fn_name":null},{"line":221,"address":[289048,289204],"length":1,"stats":{"Line":2},"fn_name":null},{"line":222,"address":[289447,289291],"length":1,"stats":{"Line":2},"fn_name":null},{"line":226,"address":[289616,290102,290329],"length":1,"stats":{"Line":2},"fn_name":"double_char_token_case"},{"line":233,"address":[289693,289797,289815],"length":1,"stats":{"Line":14},"fn_name":null},{"line":234,"address":[290082,290239,289829],"length":1,"stats":{"Line":3},"fn_name":null},{"line":235,"address":[289927,290092],"length":1,"stats":{"Line":1},"fn_name":null},{"line":237,"address":[290249,289860,290132],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[289808],"length":1,"stats":{"Line":10},"fn_name":null},{"line":244,"address":[290384],"length":1,"stats":{"Line":2},"fn_name":"double_char_token"},{"line":245,"address":[291853,290495,291055,290694,291761,290522,291319,290791,291586,290963,291227,291494],"length":1,"stats":{"Line":66},"fn_name":null},{"line":246,"address":[290414,290520],"length":1,"stats":{"Line":10},"fn_name":null},{"line":247,"address":[290604,290789],"length":1,"stats":{"Line":2},"fn_name":null},{"line":248,"address":[290873,291053],"length":1,"stats":{"Line":2},"fn_name":null},{"line":249,"address":[291140,291317],"length":1,"stats":{"Line":2},"fn_name":null},{"line":250,"address":[291404,291584],"length":1,"stats":{"Line":2},"fn_name":null},{"line":251,"address":[291851,291671],"length":1,"stats":{"Line":2},"fn_name":null},{"line":255,"address":[293639,292016,293261],"length":1,"stats":{"Line":2},"fn_name":"string"},{"line":256,"address":[292054],"length":1,"stats":{"Line":10},"fn_name":null},{"line":257,"address":[292111],"length":1,"stats":{"Line":2},"fn_name":null},{"line":260,"address":[292086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":262,"address":[292136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":263,"address":[292179,292239],"length":1,"stats":{"Line":2},"fn_name":null},{"line":264,"address":[292297,292353],"length":1,"stats":{"Line":2},"fn_name":null},{"line":266,"address":[292368],"length":1,"stats":{"Line":1},"fn_name":null},{"line":267,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":270,"address":[292282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":271,"address":[292417],"length":1,"stats":{"Line":1},"fn_name":null},{"line":272,"address":[293629,293406],"length":1,"stats":{"Line":1},"fn_name":null},{"line":276,"address":[292431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":277,"address":[292445],"length":1,"stats":{"Line":2},"fn_name":null},{"line":278,"address":[292517],"length":1,"stats":{"Line":1},"fn_name":null},{"line":279,"address":[292529],"length":1,"stats":{"Line":1},"fn_name":null},{"line":280,"address":[292585],"length":1,"stats":{"Line":1},"fn_name":null},{"line":283,"address":[292635,292559],"length":1,"stats":{"Line":4},"fn_name":null},{"line":284,"address":[293281,292736],"length":1,"stats":{"Line":2},"fn_name":null},{"line":285,"address":[292712],"length":1,"stats":{"Line":1},"fn_name":null},{"line":286,"address":[292724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":287,"address":[292773],"length":1,"stats":{"Line":1},"fn_name":null},{"line":288,"address":[292810],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[292891,292826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":291,"address":[293220,292936,292875],"length":1,"stats":{"Line":3},"fn_name":null},{"line":292,"address":[293065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":293,"address":[293080],"length":1,"stats":{"Line":1},"fn_name":null},{"line":298,"address":[292461],"length":1,"stats":{"Line":1},"fn_name":null},{"line":301,"address":[293303,292475],"length":1,"stats":{"Line":2},"fn_name":null},{"line":302,"address":[293364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":305,"address":[293352,293396],"length":1,"stats":{"Line":2},"fn_name":null},{"line":307,"address":[292191],"length":1,"stats":{"Line":1},"fn_name":null},{"line":310,"address":[293696,294501,294471],"length":1,"stats":{"Line":10},"fn_name":"char"},{"line":311,"address":[293734],"length":1,"stats":{"Line":2},"fn_name":null},{"line":312,"address":[293783],"length":1,"stats":{"Line":3},"fn_name":null},{"line":315,"address":[293763],"length":1,"stats":{"Line":7},"fn_name":null},{"line":316,"address":[293835],"length":1,"stats":{"Line":1},"fn_name":null},{"line":319,"address":[293808],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[293914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[293924],"length":1,"stats":{"Line":1},"fn_name":null},{"line":324,"address":[293863],"length":1,"stats":{"Line":5},"fn_name":null},{"line":326,"address":[293887,294283],"length":1,"stats":{"Line":3},"fn_name":null},{"line":327,"address":[293993],"length":1,"stats":{"Line":1},"fn_name":null},{"line":328,"address":[294003],"length":1,"stats":{"Line":1},"fn_name":null},{"line":329,"address":[294121],"length":1,"stats":{"Line":1},"fn_name":null},{"line":335,"address":[294275,294021],"length":1,"stats":{"Line":3},"fn_name":null},{"line":336,"address":[294217],"length":1,"stats":{"Line":1},"fn_name":null},{"line":337,"address":[294227],"length":1,"stats":{"Line":1},"fn_name":null},{"line":338,"address":[294237],"length":1,"stats":{"Line":1},"fn_name":null},{"line":339,"address":[294247],"length":1,"stats":{"Line":1},"fn_name":null},{"line":340,"address":[294257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[294267],"length":1,"stats":{"Line":1},"fn_name":null},{"line":342,"address":[294156],"length":1,"stats":{"Line":1},"fn_name":null},{"line":343,"address":[294163],"length":1,"stats":{"Line":1},"fn_name":null},{"line":344,"address":[294173],"length":1,"stats":{"Line":1},"fn_name":null},{"line":345,"address":[294187],"length":1,"stats":{"Line":1},"fn_name":null},{"line":350,"address":[293955],"length":1,"stats":{"Line":4},"fn_name":null},{"line":352,"address":[293965],"length":1,"stats":{"Line":4},"fn_name":null},{"line":353,"address":[294494,294323],"length":1,"stats":{"Line":1},"fn_name":null},{"line":356,"address":[294293,294512],"length":1,"stats":{"Line":4},"fn_name":null},{"line":357,"address":[294665],"length":1,"stats":{"Line":3},"fn_name":null},{"line":358,"address":[294675],"length":1,"stats":{"Line":2},"fn_name":null},{"line":359,"address":[294698],"length":1,"stats":{"Line":1},"fn_name":null},{"line":363,"address":[294631,294739],"length":1,"stats":{"Line":3},"fn_name":null},{"line":364,"address":[294822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":367,"address":[294785],"length":1,"stats":{"Line":1},"fn_name":null},{"line":370,"address":[294864,295448,295763],"length":1,"stats":{"Line":1},"fn_name":"comment"},{"line":371,"address":[294902],"length":1,"stats":{"Line":3},"fn_name":null},{"line":372,"address":[294967],"length":1,"stats":{"Line":1},"fn_name":null},{"line":375,"address":[294942],"length":1,"stats":{"Line":2},"fn_name":null},{"line":377,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":378,"address":[294992],"length":1,"stats":{"Line":2},"fn_name":null},{"line":379,"address":[294999],"length":1,"stats":{"Line":2},"fn_name":null},{"line":381,"address":[295052],"length":1,"stats":{"Line":2},"fn_name":null},{"line":382,"address":[295156],"length":1,"stats":{"Line":2},"fn_name":null},{"line":384,"address":[295199],"length":1,"stats":{"Line":2},"fn_name":null},{"line":385,"address":[295211],"length":1,"stats":{"Line":2},"fn_name":null},{"line":386,"address":[295219],"length":1,"stats":{"Line":2},"fn_name":null},{"line":388,"address":[295227,295438],"length":1,"stats":{"Line":2},"fn_name":null},{"line":391,"address":[295142,295476],"length":1,"stats":{"Line":4},"fn_name":null},{"line":392,"address":[295512,295732],"length":1,"stats":{"Line":2},"fn_name":null},{"line":395,"address":[295482,295751],"length":1,"stats":{"Line":4},"fn_name":null},{"line":399,"address":[295808,297639,298591],"length":1,"stats":{"Line":1},"fn_name":"number"},{"line":400,"address":[295858],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[296022],"length":1,"stats":{"Line":1},"fn_name":null},{"line":405,"address":[295969],"length":1,"stats":{"Line":3},"fn_name":null},{"line":406,"address":[296000],"length":1,"stats":{"Line":5},"fn_name":null},{"line":408,"address":[297348,296053,296012],"length":1,"stats":{"Line":13},"fn_name":null},{"line":409,"address":[296095],"length":1,"stats":{"Line":5},"fn_name":null},{"line":410,"address":[296186],"length":1,"stats":{"Line":1},"fn_name":null},{"line":412,"address":[296164,296280],"length":1,"stats":{"Line":4},"fn_name":null},{"line":413,"address":[296289],"length":1,"stats":{"Line":3},"fn_name":null},{"line":415,"address":[296371],"length":1,"stats":{"Line":5},"fn_name":null},{"line":416,"address":[296434],"length":1,"stats":{"Line":5},"fn_name":null},{"line":417,"address":[296455,296595],"length":1,"stats":{"Line":10},"fn_name":null},{"line":418,"address":[296710],"length":1,"stats":{"Line":5},"fn_name":null},{"line":419,"address":[296894],"length":1,"stats":{"Line":5},"fn_name":null},{"line":420,"address":[296801,296918],"length":1,"stats":{"Line":0},"fn_name":null},{"line":422,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":423,"address":[297100,296634],"length":1,"stats":{"Line":4},"fn_name":null},{"line":427,"address":[296492],"length":1,"stats":{"Line":2},"fn_name":null},{"line":428,"address":[296513],"length":1,"stats":{"Line":2},"fn_name":null},{"line":432,"address":[296575],"length":1,"stats":{"Line":5},"fn_name":null},{"line":433,"address":[297353,297311],"length":1,"stats":{"Line":5},"fn_name":null},{"line":435,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":438,"address":[296123,297394],"length":1,"stats":{"Line":6},"fn_name":null},{"line":439,"address":[297404],"length":1,"stats":{"Line":3},"fn_name":null},{"line":440,"address":[297488],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[297650],"length":1,"stats":{"Line":3},"fn_name":null},{"line":443,"address":[297675,298420],"length":1,"stats":{"Line":2},"fn_name":null},{"line":444,"address":[297717],"length":1,"stats":{"Line":3},"fn_name":null},{"line":445,"address":[297837],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[297869,298152,297811],"length":1,"stats":{"Line":4},"fn_name":null},{"line":448,"address":[297981,297885],"length":1,"stats":{"Line":1},"fn_name":null},{"line":465,"address":[298458,297745],"length":1,"stats":{"Line":2},"fn_name":null},{"line":468,"address":[297629,297417,297498],"length":1,"stats":{"Line":2},"fn_name":null},{"line":471,"address":[298656,300696],"length":1,"stats":{"Line":1},"fn_name":"identifier_or_keyword"},{"line":472,"address":[298694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":473,"address":[298781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":476,"address":[298764],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[298806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":479,"address":[298930,298849],"length":1,"stats":{"Line":2},"fn_name":null},{"line":480,"address":[298945],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[298957],"length":1,"stats":{"Line":1},"fn_name":null},{"line":483,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":486,"address":[298969],"length":1,"stats":{"Line":1},"fn_name":null},{"line":487,"address":[299059],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[299112,298865],"length":1,"stats":{"Line":2},"fn_name":null},{"line":492,"address":[299194,299128],"length":1,"stats":{"Line":3},"fn_name":null},{"line":493,"address":[299272,299311,299171],"length":1,"stats":{"Line":3},"fn_name":null},{"line":494,"address":[299288,299328,299367],"length":1,"stats":{"Line":4},"fn_name":null},{"line":495,"address":[299426,299387,299344],"length":1,"stats":{"Line":3},"fn_name":null},{"line":496,"address":[299403,299446,299485],"length":1,"stats":{"Line":3},"fn_name":null},{"line":497,"address":[299544,299462,299505],"length":1,"stats":{"Line":3},"fn_name":null},{"line":498,"address":[299521,299564,299603],"length":1,"stats":{"Line":3},"fn_name":null},{"line":499,"address":[299623,299662,299580],"length":1,"stats":{"Line":3},"fn_name":null},{"line":500,"address":[299721,299639,299682],"length":1,"stats":{"Line":3},"fn_name":null},{"line":501,"address":[299698,299741,299780],"length":1,"stats":{"Line":4},"fn_name":null},{"line":502,"address":[299757,299800,299839],"length":1,"stats":{"Line":4},"fn_name":null},{"line":503,"address":[299898,299859,299816],"length":1,"stats":{"Line":4},"fn_name":null},{"line":504,"address":[299918,299875,299957],"length":1,"stats":{"Line":4},"fn_name":null},{"line":505,"address":[299977,300016,299934],"length":1,"stats":{"Line":4},"fn_name":null},{"line":506,"address":[300036,299993,300075],"length":1,"stats":{"Line":4},"fn_name":null},{"line":507,"address":[300134,300052,300095],"length":1,"stats":{"Line":4},"fn_name":null},{"line":508,"address":[300154,300111,300193],"length":1,"stats":{"Line":4},"fn_name":null},{"line":509,"address":[300252,300213,300170],"length":1,"stats":{"Line":4},"fn_name":null},{"line":510,"address":[300229,300272,300311],"length":1,"stats":{"Line":4},"fn_name":null},{"line":511,"address":[300331,300288,300370],"length":1,"stats":{"Line":4},"fn_name":null},{"line":512,"address":[300347,300390,300429],"length":1,"stats":{"Line":4},"fn_name":null},{"line":513,"address":[300406,300449,300475],"length":1,"stats":{"Line":4},"fn_name":null},{"line":514,"address":[300491,300468],"length":1,"stats":{"Line":3},"fn_name":null},{"line":516,"address":[299210,300555,300686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[300736],"length":1,"stats":{"Line":1},"fn_name":"advance"},{"line":520,"address":[300750],"length":1,"stats":{"Line":7},"fn_name":null},{"line":521,"address":[300836,300767],"length":1,"stats":{"Line":7},"fn_name":null},{"line":522,"address":[300876,300801,300901],"length":1,"stats":{"Line":11},"fn_name":null},{"line":523,"address":[300952,300940,300880],"length":1,"stats":{"Line":10},"fn_name":null},{"line":524,"address":[300944],"length":1,"stats":{"Line":9},"fn_name":null},{"line":527,"address":[300992],"length":1,"stats":{"Line":1},"fn_name":"span"},{"line":528,"address":[301092],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[301025],"length":1,"stats":{"Line":1},"fn_name":null},{"line":530,"address":[301050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":531,"address":[301038],"length":1,"stats":{"Line":3},"fn_name":null},{"line":532,"address":[301042],"length":1,"stats":{"Line":1},"fn_name":null},{"line":533,"address":[301046],"length":1,"stats":{"Line":4},"fn_name":null},{"line":535,"address":[301077],"length":1,"stats":{"Line":7},"fn_name":null},{"line":536,"address":[301065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":537,"address":[301069],"length":1,"stats":{"Line":5},"fn_name":null},{"line":538,"address":[301073],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[301168],"length":1,"stats":{"Line":2},"fn_name":"match_char"},{"line":544,"address":[301213,301186],"length":1,"stats":{"Line":20},"fn_name":null},{"line":545,"address":[301220],"length":1,"stats":{"Line":7},"fn_name":null},{"line":546,"address":[301225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":548,"address":[301208],"length":1,"stats":{"Line":2},"fn_name":null},{"line":552,"address":[301248],"length":1,"stats":{"Line":1},"fn_name":"is_valid_in_identifier"},{"line":553,"address":[301260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[301312],"length":1,"stats":{"Line":1},"fn_name":"is_valid_identifier_start"},{"line":557,"address":[301324],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[301376],"length":1,"stats":{"Line":1},"fn_name":"next"},{"line":564,"address":[301393],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":573,"address":[],"length":0,"stats":{"Line":0},"fn_name":null}],"covered":269,"coverable":282},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","lib.rs"],"content":"use std::sync::{Arc, Mutex};\n\nuse errors::ErrorModuleRef;\nuse filters::ParserTokenFilter;\nuse lexer::TokenProducer;\nuse unit::{ReadSeek, Unit, UnitIdentifier, Units};\n\npub use config::Config;\npub use errors::ErrorModule;\n\nmod config;\nmod errors;\nmod filters;\nmod lexer;\nmod parser;\nmod tokens;\nmod unit;\nmod line_endings;\n\n#[cfg(test)]\nmod tests;\n\npub struct Brakion {\n    config: Config,\n    units: Units,\n    error_module: ErrorModuleRef,\n}\n\nimpl Brakion {\n    pub fn new(config: Config) -\u003e Self {\n        Self {\n            config,\n            units: Vec::new(),\n            error_module: Arc::new(Mutex::new(ErrorModule::new())),\n        }\n    }\n\n    pub fn add_unit\u003cR: ReadSeek + 'static\u003e(\u0026mut self, name: String, input: R) {\n        let id = self.units.len();\n        self.units.push(Unit::new(name, id, Box::new(input)));\n    }\n\n    pub fn check(\u0026mut self) -\u003e Result\u003c(), Vec\u003cerrors::Error\u003e\u003e {\n        for unit_id in 0..self.units.len() {\n            self.process_unit(unit_id);\n        }\n\n        let error_module = self.error_module.lock().unwrap();\n\n        if error_module.unrecoverable() {\n            error_module.dump(\u0026mut self.units);\n            Err(error_module.errors())\n        } else {\n            Ok(())\n        }\n    }\n\n    fn process_unit(\u0026mut self, unit_id: UnitIdentifier) {\n        let unit = \u0026mut self.units[unit_id];\n        let unit_name = unit.name().to_string();\n        let mut lexer = lexer::Lexer::new(unit, \u0026self.config, self.error_module.clone());\n        let mut filtered = ParserTokenFilter::new(\u0026mut lexer);\n\n        while let Some(token) = filtered.next() {\n            println!(\"{token} in {}\", \u0026unit_name);\n        }\n    }\n\n    pub fn units(\u0026self) -\u003e \u0026Units {\n        \u0026self.units\n    }\n\n    pub fn unit(\u0026self, id: UnitIdentifier) -\u003e \u0026Unit {\n        \u0026self.units[id]\n    }\n}\n","traces":[{"line":30,"address":[306015,305808],"length":1,"stats":{"Line":0},"fn_name":"new"},{"line":33,"address":[2766802],"length":1,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[2766816,2766873],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[373852,373809,373328],"length":1,"stats":{"Line":0},"fn_name":"add_unit\u003cstd::fs::File\u003e"},{"line":39,"address":[373357,373473],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[373481,373656],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[2767024,2767491],"length":1,"stats":{"Line":0},"fn_name":"check"},{"line":44,"address":[2767246,2767062],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[306261],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[306167],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[306231,306313,306347,306467],"length":1,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[306357],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[306395],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[306339],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[306528,307274],"length":1,"stats":{"Line":0},"fn_name":"process_unit"},{"line":59,"address":[306556],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[2767619],"length":1,"stats":{"Line":0},"fn_name":null},{"line":61,"address":[306614,306691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[2767739,2767794],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[307021,306778],"length":1,"stats":{"Line":0},"fn_name":null},{"line":65,"address":[306916,307119],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[307312],"length":1,"stats":{"Line":0},"fn_name":"units"},{"line":70,"address":[307320],"length":1,"stats":{"Line":0},"fn_name":null},{"line":73,"address":[307328],"length":1,"stats":{"Line":0},"fn_name":"unit"},{"line":74,"address":[307342],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":25},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","line_endings.rs"],"content":"use std::{iter::Peekable, str::Chars};\r\n\r\n#[derive(Debug, Clone, Copy, PartialEq, Eq)]\r\npub enum LineEndingStyle {\r\n    Unknown,\r\n    Lf,\r\n    Cr,\r\n    Lfcr,\r\n    Crlf,\r\n}\r\n\r\nimpl LineEndingStyle {\r\n    pub fn as_str(\u0026self) -\u003e \u0026'static str {\r\n        match self {\r\n            LineEndingStyle::Unknown =\u003e \"\u003cUNKNOWN\u003e\",\r\n            LineEndingStyle::Lf =\u003e \"\\n\",\r\n            LineEndingStyle::Cr =\u003e \"\\r\",\r\n            LineEndingStyle::Lfcr =\u003e \"\\n\\r\",\r\n            LineEndingStyle::Crlf =\u003e \"\\r\\n\",\r\n        }\r\n    }\r\n\r\n    pub fn get_line_ending\u003cC, G, A\u003e(\r\n        context: \u0026mut C,\r\n        mut get_current: G,\r\n        mut advance: A,\r\n    ) -\u003e Option\u003cLineEndingStyle\u003e\r\n    where\r\n        G: FnMut(\u0026mut C) -\u003e Option\u003cchar\u003e,\r\n        A: FnMut(\u0026mut C),\r\n    {\r\n        match get_current(context) {\r\n            Some('\\r') =\u003e {\r\n                advance(context);\r\n\r\n                match get_current(context) {\r\n                    Some('\\n') =\u003e {\r\n                        advance(context);\r\n                        Some(LineEndingStyle::Crlf)\r\n                    }\r\n                    _ =\u003e Some(LineEndingStyle::Cr),\r\n                }\r\n            }\r\n            Some('\\n') =\u003e {\r\n                advance(context);\r\n\r\n                match get_current(context) {\r\n                    Some('\\r') =\u003e {\r\n                        advance(context);\r\n                        Some(LineEndingStyle::Lfcr)\r\n                    }\r\n                    _ =\u003e Some(LineEndingStyle::Lf),\r\n                }\r\n            }\r\n            _ =\u003e None,\r\n        }\r\n    }\r\n\r\n    pub fn count_line_endings(text: \u0026str) -\u003e usize {\r\n        let mut count = 0;\r\n        let mut context = text.chars().peekable();\r\n        let get_current = |context: \u0026mut Peekable\u003cChars\u003c'_\u003e\u003e| context.peek().copied();\r\n        let advance = |context: \u0026mut Peekable\u003cChars\u003c'_\u003e\u003e| {\r\n            context.next();\r\n        };\r\n\r\n        loop {\r\n            if LineEndingStyle::get_line_ending(\u0026mut context, get_current, advance).is_some() {\r\n                count += 1;\r\n            }\r\n            else {\r\n                advance(\u0026mut context);\r\n            }\r\n\r\n            if get_current(\u0026mut context).is_none() {\r\n                break;\r\n            }\r\n        }\r\n\r\n        count\r\n    }\r\n}\r\n\r\nimpl std::fmt::Display for LineEndingStyle {\r\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\r\n        match self {\r\n            LineEndingStyle::Unknown =\u003e write!(f, \"Unknown\"),\r\n            LineEndingStyle::Lf =\u003e write!(f, \"LF\"),\r\n            LineEndingStyle::Cr =\u003e write!(f, \"CR\"),\r\n            LineEndingStyle::Lfcr =\u003e write!(f, \"LFCR\"),\r\n            LineEndingStyle::Crlf =\u003e write!(f, \"CRLF\"),\r\n        }\r\n    }\r\n}\r\n","traces":[{"line":13,"address":[434272],"length":1,"stats":{"Line":1},"fn_name":"as_str"},{"line":14,"address":[434281],"length":1,"stats":{"Line":1},"fn_name":null},{"line":15,"address":[434310],"length":1,"stats":{"Line":0},"fn_name":null},{"line":16,"address":[434333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":17,"address":[434356],"length":1,"stats":{"Line":0},"fn_name":null},{"line":18,"address":[434379],"length":1,"stats":{"Line":0},"fn_name":null},{"line":19,"address":[434402],"length":1,"stats":{"Line":0},"fn_name":null},{"line":23,"address":[253296,253727,254224,254655,254191,253760],"length":1,"stats":{"Line":6},"fn_name":"get_line_ending\u003ccore::iter::adapters::peekable::Peekable\u003ccore::str::iter::Chars\u003e, brakion_core::tests::line_endings::test_str_with::{closure_env#0}, brakion_core::tests::line_endings::test_str_with::{closure_env#1}\u003e"},{"line":32,"address":[253837,254244,253373,253780,254301,253316],"length":1,"stats":{"Line":17},"fn_name":null},{"line":33,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[253440,253904,254368],"length":1,"stats":{"Line":6},"fn_name":null},{"line":36,"address":[253614,254078,254542],"length":1,"stats":{"Line":6},"fn_name":null},{"line":37,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[254159,253695,254623],"length":1,"stats":{"Line":6},"fn_name":null},{"line":39,"address":[253717,254181,254645],"length":1,"stats":{"Line":5},"fn_name":null},{"line":41,"address":[254608,253680,254144],"length":1,"stats":{"Line":5},"fn_name":null},{"line":44,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[253470,253934,254398],"length":1,"stats":{"Line":9},"fn_name":null},{"line":47,"address":[253502,253966,254430],"length":1,"stats":{"Line":9},"fn_name":null},{"line":48,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[254508,253580,254044],"length":1,"stats":{"Line":4},"fn_name":null},{"line":50,"address":[254066,254530,253602],"length":1,"stats":{"Line":4},"fn_name":null},{"line":52,"address":[254032,254496,253568],"length":1,"stats":{"Line":6},"fn_name":null},{"line":55,"address":[253892,254356,253428],"length":1,"stats":{"Line":3},"fn_name":null},{"line":59,"address":[434448],"length":1,"stats":{"Line":4},"fn_name":"count_line_endings"},{"line":60,"address":[434462],"length":1,"stats":{"Line":4},"fn_name":null},{"line":61,"address":[434471],"length":1,"stats":{"Line":4},"fn_name":null},{"line":62,"address":[254688,254713],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":63,"address":[254736],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":64,"address":[254761],"length":1,"stats":{"Line":1},"fn_name":null},{"line":68,"address":[434489,434575],"length":1,"stats":{"Line":2},"fn_name":null},{"line":69,"address":[434544,434577],"length":1,"stats":{"Line":1},"fn_name":null},{"line":72,"address":[434517],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[434607],"length":1,"stats":{"Line":1},"fn_name":null},{"line":85,"address":[434672],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":86,"address":[434699],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[434730],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[434790],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[434850],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[434907],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[434970],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":26,"coverable":41},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","parser.rs"],"content":"","traces":[],"covered":0,"coverable":0},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","tests","lexer.rs"],"content":"use crate::errors::lexer::LexerError;\nuse crate::errors::ErrorKind;\nuse crate::filters::ParserTokenFilter;\nuse crate::lexer::{Lexer, TokenProducer};\nuse crate::line_endings::LineEndingStyle;\nuse crate::tokens::{Token, TokenKind};\nuse crate::unit::Unit;\nuse crate::Config;\nuse crate::ErrorModule;\nuse std::io::Cursor;\n\nfn compare_token_slice_kinds(a: \u0026[Token], b: \u0026[TokenKind]) {\n    assert_eq!(a.len(), b.len());\n\n    for (a, b) in a.iter().zip(b.iter()) {\n        assert_eq!(a.kind, *b); // Takes care of value equality as well\n                                // Ignore span\n    }\n}\n\nfn check_output_token_kinds(source: \u0026str, expected: \u0026[TokenKind]) {\n    let errors = ErrorModule::new_ref();\n    let config = Config::default();\n\n    let unit = Unit::new(\n        \"\u003ctest\u003e\".to_string(),\n        0,\n        Box::new(Cursor::new(source.to_string())),\n    );\n\n    let mut units = vec![unit];\n\n    let mut lexer = Lexer::new(units.iter_mut().next().unwrap(), \u0026config, errors.clone());\n\n    let mut tokens = Vec::new();\n\n    while let Some(token) = lexer.next() {\n        tokens.push(token);\n    }\n\n    if !errors.lock().unwrap().errors.is_empty() {\n        errors.lock().unwrap().dump(\u0026mut units);\n        panic!(\"Lexer produced errors\");\n    }\n\n    compare_token_slice_kinds(\u0026tokens, expected);\n}\n\nfn check_output_token_span_positions(source: \u0026str, expected: \u0026[(usize, usize, usize, usize)]) {\n    let errors = ErrorModule::new_ref();\n    let config = Config::default();\n\n    let unit = Unit::new(\n        \"\u003ctest\u003e\".to_string(),\n        0,\n        Box::new(Cursor::new(source.to_string())),\n    );\n\n    let mut units = vec![unit];\n\n    let mut lexer = Lexer::new(units.iter_mut().next().unwrap(), \u0026config, errors.clone());\n\n    let mut tokens = Vec::new();\n\n    while let Some(token) = lexer.next() {\n        tokens.push(token);\n    }\n\n    if !errors.lock().unwrap().errors.is_empty() {\n        errors.lock().unwrap().dump(\u0026mut units);\n        panic!(\"Lexer produced errors\");\n    }\n\n    assert_eq!(tokens.len(), expected.len() + 1); // Account for EOF\n\n    for (token, expected) in tokens.iter().zip(expected.iter()) {\n        assert_eq!(token.span.unwrap().start.line, expected.0);\n        assert_eq!(token.span.unwrap().start.column, expected.1);\n        assert_eq!(token.span.unwrap().end.line, expected.2);\n        assert_eq!(token.span.unwrap().end.column, expected.3);\n    }\n}\n\nfn check_output_token_kinds_with_errors(\n    source: \u0026str,\n    expected: \u0026[TokenKind],\n) -\u003e Vec\u003ccrate::errors::Error\u003e {\n    let errors = ErrorModule::new_ref();\n    let config = Config::default();\n\n    let mut unit = Unit::new(\n        \"\u003ctest\u003e\".to_string(),\n        0,\n        Box::new(Cursor::new(source.to_string())),\n    );\n\n    let mut lexer = Lexer::new(\u0026mut unit, \u0026config, errors.clone());\n\n    let mut tokens = Vec::new();\n\n    while let Some(token) = lexer.next() {\n        tokens.push(token);\n    }\n\n    compare_token_slice_kinds(\u0026tokens, expected);\n\n    let err = errors.lock().unwrap().errors.clone();\n    err\n}\n\n#[test]\nfn test_lexer_empty() {\n    let source = \"\";\n\n    let expected = vec![TokenKind::Eof];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_hello_world() {\n    let source = \"fn main() {\n        std::io::println(\\\"Hello, world!\\\");\n    }\";\n\n    let expected = vec![\n        TokenKind::Fn,\n        TokenKind::Identifier(\"main\".to_string()),\n        TokenKind::LeftParen,\n        TokenKind::RightParen,\n        TokenKind::LeftBrace,\n        TokenKind::Identifier(\"std\".to_string()),\n        TokenKind::DoubleColon,\n        TokenKind::Identifier(\"io\".to_string()),\n        TokenKind::DoubleColon,\n        TokenKind::Identifier(\"println\".to_string()),\n        TokenKind::LeftParen,\n        TokenKind::String(\"Hello, world!\".to_string()),\n        TokenKind::RightParen,\n        TokenKind::Semicolon,\n        TokenKind::RightBrace,\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_simples() {\n    let source = \"(){}[],.+;/*|?:-::-\u003e!\u003c\u003c==\u003e=\u003e!===\";\n\n    let source_with_spaces = \"( ) { } [ ] , . + ; / * | ? : - :: -\u003e ! \u003c \u003c= = \u003e= \u003e != ==\";\n\n    let expected = vec![\n        TokenKind::LeftParen,\n        TokenKind::RightParen,\n        TokenKind::LeftBrace,\n        TokenKind::RightBrace,\n        TokenKind::LeftBracket,\n        TokenKind::RightBracket,\n        TokenKind::Comma,\n        TokenKind::Dot,\n        TokenKind::Plus,\n        TokenKind::Semicolon,\n        TokenKind::Slash,\n        TokenKind::Star,\n        TokenKind::Pipe,\n        TokenKind::Question,\n        TokenKind::Colon,\n        TokenKind::Minus,\n        TokenKind::DoubleColon,\n        TokenKind::Arrow,\n        TokenKind::Bang,\n        TokenKind::Less,\n        TokenKind::LessEqual,\n        TokenKind::Equal,\n        TokenKind::GreaterEqual,\n        TokenKind::Greater,\n        TokenKind::BangEqual,\n        TokenKind::EqualEqual,\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n    check_output_token_kinds(source_with_spaces, \u0026expected);\n}\n\n#[test]\nfn test_lexer_numbers_short() {\n    let source = \"123 123456 123.456 0.123 0.12345 12345.0\";\n\n    let expected = vec![\n        TokenKind::Integer(123),\n        TokenKind::Integer(123456),\n        TokenKind::Float(123.456),\n        TokenKind::Float(0.123),\n        TokenKind::Float(0.12345),\n        TokenKind::Float(12345.0),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_integer_bounds() {\n    let mut source = \"\".to_string();\n    source += \u0026std::u8::MAX.to_string();\n    source += \" \";\n    source += \u0026std::u16::MAX.to_string();\n    source += \" \";\n    source += \u0026std::u32::MAX.to_string();\n    source += \" \";\n    source += \u0026std::u64::MAX.to_string();\n    source += \" \";\n    // Token stores u64, ignore signed min/max\n\n    let expected = vec![\n        TokenKind::Integer(std::u8::MAX as u64),\n        TokenKind::Integer(std::u16::MAX as u64),\n        TokenKind::Integer(std::u32::MAX as u64),\n        TokenKind::Integer(std::u64::MAX),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(\u0026source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_float_bounds() {\n    let mut source = \"\".to_string();\n    // Force to use decimal point, otherwise the Display impl\n    // will round stuff.\n    source += format!(\"{:.1} \", std::f32::MAX).as_str();\n    source += format!(\"{:.1} \", std::f32::MIN).as_str();\n    source += format!(\"{:.1} \", std::f64::MAX).as_str();\n    source += format!(\"{:.1} \", std::f64::MIN).as_str();\n\n    let expected = vec![\n        TokenKind::Float(std::f32::MAX as f64),\n        TokenKind::Minus,\n        TokenKind::Float(std::f32::MIN.abs() as f64),\n        TokenKind::Float(std::f64::MAX),\n        TokenKind::Minus,\n        TokenKind::Float(std::f64::MIN.abs()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(\u0026source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_integer_too_long() {\n    let mut source = String::new();\n\n    for _ in 0..2048 {\n        source += \"9\";\n    }\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(\u0026source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(errors[0].kind, ErrorKind::LexerError(LexerError::NumberTooLong));\n}\n\n#[test]\nfn test_lexer_float_too_long() {\n    let mut source = \"0.\".to_string();\n\n    for _ in 0..2048 {\n        source += \"9\";\n    }\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(\u0026source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(errors[0].kind, ErrorKind::LexerError(LexerError::NumberTooLong));\n}\n\n#[test]\nfn test_lexer_strings() {\n    let source = \"\\\"Hello, world!\\\" \\\"Hello,\\\\n world!\\\" \\\"Hello,\\\\\\\" world!\\\"\";\n\n    let expected = vec![\n        TokenKind::String(\"Hello, world!\".to_string()),\n        TokenKind::String(\"Hello,\\\\n world!\".to_string()),\n        TokenKind::String(\"Hello,\\\\\\\" world!\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_multiline_string() {\n    let source = \"\\\"Hello, \\nworld!\\\"\";\n\n    let expected = vec![\n        TokenKind::String(\"Hello, \\nworld!\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n\n    check_output_token_span_positions(source, \u0026[(1, 1, 2, 8)]);\n}\n\n#[test]\nfn test_lexer_string_invalid_escapes() {\n    let source = \"\\\"\\\\a\\\" \\\"\\\\b\\\" \\\"\\\\c\\\" \\\"\\\\n\\\" \\\"\\\\g\\\"\";\n\n    let expected = vec![\n        TokenKind::String(\"\\\\a\".to_string()),\n        TokenKind::String(\"\\\\b\".to_string()),\n        TokenKind::String(\"\\\\c\".to_string()),\n        TokenKind::String(\"\\\\n\".to_string()),\n        TokenKind::String(\"\\\\g\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 4);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('a'))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('b'))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('c'))\n    );\n    assert_eq!(\n        errors[3].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('g'))\n    );\n}\n\n#[test]\nfn test_lexer_string_abrupt_termination() {\n    let source = \"\\\"Hello, world!\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnterminatedStringLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_string_abrupt_escape_termination() {\n    let source = \"\\\"abc\\\\\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnterminatedStringLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_string_empty() {\n    let source = \"\\\"\\\"\";\n\n    let expected = vec![TokenKind::String(\"\".to_string()), TokenKind::Eof];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_string_too_long() {\n    let mut source = \"\\\"\".to_string();\n    for _ in 0..(std::u16::MAX as usize) {\n        source += \"a\";\n    }\n    source += \"\\\"\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(\u0026source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::StringTooLong)\n    );\n}\n\n#[test]\nfn test_lexer_chars() {\n    let source = \"'a' '🙂' '\\\\n' '\\\\'' '\\\\\\\\' '\\\\t' '\\\\r' '\\\\0'\";\n\n    let expected = vec![\n        TokenKind::Char('a'),\n        TokenKind::Char('🙂'),\n        TokenKind::Char('\\n'),\n        TokenKind::Char('\\''),\n        TokenKind::Char('\\\\'),\n        TokenKind::Char('\\t'),\n        TokenKind::Char('\\r'),\n        TokenKind::Char('\\0'),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_empty_char() {\n    let source = \"''\";\n\n    let expected = vec![TokenKind::Eof];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::EmptyCharLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_char_invalid_escapes() {\n    let source = \"'\\\\a' '\\\\b' '\\\\c' '\\\\n' '\\\\g'\";\n\n    let expected = vec![TokenKind::Char('\\n'), TokenKind::Eof];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 4);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('a'))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('b'))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('c'))\n    );\n    assert_eq!(\n        errors[3].kind,\n        ErrorKind::LexerError(LexerError::InvalidEscapeSequence('g'))\n    );\n}\n\n#[test]\nfn test_lexer_char_abrupt_termination() {\n    let source = \"'a\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnterminatedCharLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_char_no_char() {\n    let source = \"'\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnterminatedCharLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_char_abrupt_escape_termination() {\n    let source = \"'\\\\\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnterminatedCharLiteral)\n    );\n}\n\n#[test]\nfn test_lexer_char_not_one_char() {\n    let source = \"'ab'\";\n\n    let expected = vec![TokenKind::Eof];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::CharLiteralNotOneChar)\n    );\n}\n\n#[test]\nfn test_lexer_char_too_long() {\n    let mut source = \"'\".to_string();\n\n    for _ in 0..(std::u16::MAX as usize) {\n        source += \"a\";\n    }\n\n    source += \"'\";\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(\u0026source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::CharLiteralTooLong)\n    );\n}\n\n#[test]\nfn test_lexer_keywords() {\n    let source = \"pub mod fn type trait impl var and or for in if else match on while break continue return true false void\";\n\n    let expected = vec![\n        TokenKind::Pub,\n        TokenKind::Mod,\n        TokenKind::Fn,\n        TokenKind::Type,\n        TokenKind::Trait,\n        TokenKind::Impl,\n        TokenKind::Var,\n        TokenKind::And,\n        TokenKind::Or,\n        TokenKind::For,\n        TokenKind::In,\n        TokenKind::If,\n        TokenKind::Else,\n        TokenKind::Match,\n        TokenKind::On,\n        TokenKind::While,\n        TokenKind::Break,\n        TokenKind::Continue,\n        TokenKind::Return,\n        TokenKind::True,\n        TokenKind::False,\n        TokenKind::Void,\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_identifiers() {\n    let source = \"self a b abc a_b _a _abc ___abc Abc aBC _ABC ą _ą _Ą ł _ _0 _a0 a0\";\n\n    let expected = vec![\n        TokenKind::Identifier(\"self\".to_string()),\n        TokenKind::Identifier(\"a\".to_string()),\n        TokenKind::Identifier(\"b\".to_string()),\n        TokenKind::Identifier(\"abc\".to_string()),\n        TokenKind::Identifier(\"a_b\".to_string()),\n        TokenKind::Identifier(\"_a\".to_string()),\n        TokenKind::Identifier(\"_abc\".to_string()),\n        TokenKind::Identifier(\"___abc\".to_string()),\n        TokenKind::Identifier(\"Abc\".to_string()),\n        TokenKind::Identifier(\"aBC\".to_string()),\n        TokenKind::Identifier(\"_ABC\".to_string()),\n        TokenKind::Identifier(\"ą\".to_string()),\n        TokenKind::Identifier(\"_ą\".to_string()),\n        TokenKind::Identifier(\"_Ą\".to_string()),\n        TokenKind::Identifier(\"ł\".to_string()),\n        TokenKind::Identifier(\"_\".to_string()),\n        TokenKind::Identifier(\"_0\".to_string()),\n        TokenKind::Identifier(\"_a0\".to_string()),\n        TokenKind::Identifier(\"a0\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_identifiers_with_keywords() {\n    let source = \"pub puba apub apuba _pub pub_ forward before\";\n\n    let expected = vec![\n        TokenKind::Pub,\n        TokenKind::Identifier(\"puba\".to_string()),\n        TokenKind::Identifier(\"apub\".to_string()),\n        TokenKind::Identifier(\"apuba\".to_string()),\n        TokenKind::Identifier(\"_pub\".to_string()),\n        TokenKind::Identifier(\"pub_\".to_string()),\n        TokenKind::Identifier(\"forward\".to_string()),\n        TokenKind::Identifier(\"before\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected);\n}\n\n#[test]\nfn test_lexer_identifier_too_long() {\n    let mut source = \"a\".to_string();\n\n    for _ in 0..(std::u16::MAX as usize) {\n        source += \"a\";\n    }\n\n    let expected = vec![];\n\n    let errors = check_output_token_kinds_with_errors(\u0026source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::IdentifierTooLong)\n    );\n}\n\n#[test]\nfn test_lexer_comments() {\n    let source = \"# Comment at start\\n # Comment ater line break \\n  # Comment with a # in it\\nidentifier # Comment on non-empty line \\n# Comment at end\";\n\n    let expected_raw = vec![\n        TokenKind::Comment(\" Comment at start\".to_string()),\n        TokenKind::Comment(\" Comment ater line break \".to_string()),\n        TokenKind::Comment(\" Comment with a # in it\".to_string()),\n        TokenKind::Identifier(\"identifier\".to_string()),\n        TokenKind::Comment(\" Comment on non-empty line \".to_string()),\n        TokenKind::Comment(\" Comment at end\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    check_output_token_kinds(source, \u0026expected_raw);\n}\n\n#[test]\nfn test_lexer_comments_filter() {\n    let source = \"# Comment at start\\n # Comment ater line break \\n  # Comment with a # in it\\nidentifier # Comment on non-empty line \\n# Comment at end\";\n\n    let expected = vec![\n        TokenKind::Identifier(\"identifier\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    // Inlined from check_output_tokens with filter\n\n    let errors = ErrorModule::new_ref();\n    let config = Config::default();\n\n    let unit = Unit::new(\n        \"\u003ctest\u003e\".to_string(),\n        0,\n        Box::new(Cursor::new(source.to_string())),\n    );\n\n    let mut units = vec![unit];\n\n    let mut lexer = Lexer::new(units.iter_mut().next().unwrap(), \u0026config, errors.clone());\n    // Diff from check_output_tokens\n    let mut filter = ParserTokenFilter::new(\u0026mut lexer);\n\n    let mut tokens = Vec::new();\n\n    while let Some(token) = filter.next() {\n        tokens.push(token);\n    }\n\n    if !errors.lock().unwrap().errors.is_empty() {\n        errors.lock().unwrap().dump(\u0026mut units);\n        panic!(\"Lexer produced errors\");\n    }\n\n    compare_token_slice_kinds(\u0026tokens, \u0026expected);\n}\n\n#[test]\nfn test_line_ending_mix() {\n    let source_lf = \"a\\nb\\r\\nc\\rd\\n\\re\";\n    let source_cr = \"a\\rb\\nc\\r\\nd\\n\\re\";\n    let source_crlf = \"a\\r\\nb\\nc\\rd\\n\\re\";\n    let source_lfcr = \"a\\n\\rb\\nc\\rd\\r\\ne\";\n\n    let expected = vec![\n        TokenKind::Identifier(\"a\".to_string()),\n        TokenKind::Identifier(\"b\".to_string()),\n        TokenKind::Identifier(\"c\".to_string()),\n        TokenKind::Identifier(\"d\".to_string()),\n        TokenKind::Identifier(\"e\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    let errors = check_output_token_kinds_with_errors(source_lf, \u0026expected);\n\n    assert_eq!(errors.len(), 3);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lf,\n            LineEndingStyle::Crlf\n        ))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lf,\n            LineEndingStyle::Cr\n        ))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lf,\n            LineEndingStyle::Lfcr\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_cr, \u0026expected);\n\n    assert_eq!(errors.len(), 3);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Cr,\n            LineEndingStyle::Lf\n        ))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Cr,\n            LineEndingStyle::Crlf\n        ))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Cr,\n            LineEndingStyle::Lfcr\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_crlf, \u0026expected);\n\n    assert_eq!(errors.len(), 3);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Crlf,\n            LineEndingStyle::Lf\n        ))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Crlf,\n            LineEndingStyle::Cr\n        ))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Crlf,\n            LineEndingStyle::Lfcr\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_lfcr, \u0026expected);\n\n    assert_eq!(errors.len(), 3);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lfcr,\n            LineEndingStyle::Lf\n        ))\n    );\n    assert_eq!(\n        errors[1].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lfcr,\n            LineEndingStyle::Cr\n        ))\n    );\n    assert_eq!(\n        errors[2].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lfcr,\n            LineEndingStyle::Crlf\n        ))\n    );\n}\n\n// Produce only one error (of a kind) per file, not for every bad line ending\n#[test]\nfn test_line_ending_mix_amount() {\n    let source_lf = \"a\\nb\\r\\nc\\r\\nd\";\n    let source_cr = \"a\\rb\\nc\\nd\";\n    let source_crlf = \"a\\r\\nb\\nc\\nd\";\n    let source_lfcr = \"a\\n\\rb\\nc\\nd\";\n\n    let expected = vec![\n        TokenKind::Identifier(\"a\".to_string()),\n        TokenKind::Identifier(\"b\".to_string()),\n        TokenKind::Identifier(\"c\".to_string()),\n        TokenKind::Identifier(\"d\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    let errors = check_output_token_kinds_with_errors(source_lf, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lf,\n            LineEndingStyle::Crlf\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_cr, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Cr,\n            LineEndingStyle::Lf\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_crlf, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Crlf,\n            LineEndingStyle::Lf\n        ))\n    );\n\n    let errors = check_output_token_kinds_with_errors(source_lfcr, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::InconsistentLineEndings(\n            LineEndingStyle::Lfcr,\n            LineEndingStyle::Lf\n        ))\n    );\n}\n\n#[test]\nfn test_bad_chars() {\n    let source = \"a b$c\";\n\n    let expected = vec![\n        TokenKind::Identifier(\"a\".to_string()),\n        TokenKind::Identifier(\"b\".to_string()),\n        TokenKind::Identifier(\"c\".to_string()),\n        TokenKind::Eof,\n    ];\n\n    let errors = check_output_token_kinds_with_errors(source, \u0026expected);\n\n    assert_eq!(errors.len(), 1);\n    assert_eq!(\n        errors[0].kind,\n        ErrorKind::LexerError(LexerError::UnexpectedCharacter('$'))\n    );\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","tests","line_endings.rs"],"content":"use crate::line_endings::LineEndingStyle;\r\n\r\nenum EqCheck {\r\n    LineEnding(Option\u003cLineEndingStyle\u003e),\r\n    Char(char),\r\n}\r\n\r\nfn test_str_with(text: \u0026str, checks: \u0026[EqCheck]) {\r\n    let mut context = text.chars().peekable();\r\n    let get_current = |context: \u0026mut std::iter::Peekable\u003cstd::str::Chars\u003c'_\u003e\u003e| {\r\n        context.peek().copied()\r\n    };\r\n    let advance = |context: \u0026mut std::iter::Peekable\u003cstd::str::Chars\u003c'_\u003e\u003e| {\r\n        context.next();\r\n    };\r\n\r\n    for check in checks {\r\n        match check {\r\n            EqCheck::LineEnding(expected) =\u003e {\r\n                assert_eq!(\r\n                    LineEndingStyle::get_line_ending(\u0026mut context, get_current, advance),\r\n                    *expected\r\n                );\r\n            }\r\n            EqCheck::Char(expected) =\u003e {\r\n                assert_eq!(get_current(\u0026mut context), Some(*expected));\r\n                advance(\u0026mut context);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_none() {\r\n    test_str_with(\r\n        \"abc\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(None),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(None),\r\n            EqCheck::Char('c'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lf_start() {\r\n    test_str_with(\r\n        \"\\na\",\r\n        \u0026[\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lf)),\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lf_middle() {\r\n    test_str_with(\r\n        \"a\\nb\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lf)),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lf_end() {\r\n    test_str_with(\r\n        \"a\\n\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lf)),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_crlf_start() {\r\n    test_str_with(\r\n        \"\\r\\na\",\r\n        \u0026[\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Crlf)),\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_crlf_mid() {\r\n    test_str_with(\r\n        \"a\\r\\nb\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Crlf)),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_crlf_end() {\r\n    test_str_with(\r\n        \"a\\r\\n\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Crlf)),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_cr_start() {\r\n    test_str_with(\r\n        \"\\ra\",\r\n        \u0026[\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Cr)),\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_cr_mid() {\r\n    test_str_with(\r\n        \"a\\rb\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Cr)),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_cr_end() {\r\n    test_str_with(\r\n        \"a\\r\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Cr)),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lfcr_start() {\r\n    test_str_with(\r\n        \"\\n\\ra\",\r\n        \u0026[\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lfcr)),\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lfcr_mid() {\r\n    test_str_with(\r\n        \"a\\n\\rb\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lfcr)),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(None),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_lfcr_end() {\r\n    test_str_with(\r\n        \"a\\n\\r\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lfcr)),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_get_line_ending_mixed() {\r\n    test_str_with(\r\n        \"a\\n\\rb\\nc\\rd\\r\\n\",\r\n        \u0026[\r\n            EqCheck::Char('a'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lfcr)),\r\n            EqCheck::Char('b'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Lf)),\r\n            EqCheck::Char('c'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Cr)),\r\n            EqCheck::Char('d'),\r\n            EqCheck::LineEnding(Some(LineEndingStyle::Crlf)),\r\n        ],\r\n    );\r\n}\r\n\r\n#[test]\r\nfn test_count_lf() {\r\n    assert_eq!(LineEndingStyle::count_line_endings(\"\\na\\nb\\nc\\n\\n\"), 5);\r\n}\r\n\r\n#[test]\r\nfn test_count_crlf() {\r\n    assert_eq!(LineEndingStyle::count_line_endings(\"\\r\\na\\r\\nb\\r\\nc\\r\\n\\r\\n\"), 5);\r\n}\r\n\r\n#[test]\r\nfn test_count_cr() {\r\n    assert_eq!(LineEndingStyle::count_line_endings(\"\\ra\\rb\\rc\\r\\r\"), 5);\r\n}\r\n\r\n#[test]\r\nfn test_count_lfcr() {\r\n    assert_eq!(LineEndingStyle::count_line_endings(\"\\n\\ra\\n\\rb\\n\\rc\\n\\r\\n\\r\"), 5);\r\n}\r\n\r\n#[test]\r\nfn test_count_mixed() {\r\n    assert_eq!(\r\n        LineEndingStyle::count_line_endings(\"\\na\\n\\rb\\nc\\r\\nd\\r\\n\"),\r\n        5\r\n    );\r\n}\r\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","tests","mod.rs"],"content":"mod lexer;\nmod unit;\nmod line_endings;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","tests","unit.rs"],"content":"use crate::unit::READ_INCREMENT;\nuse crate::Unit;\n\n#[test]\nfn utf8_misalignment_boundary() {\n    let mut s = String::new();\n    for _ in 0..(READ_INCREMENT - 2) {\n        s.push('a');\n    }\n\n    let mut bytes = Vec::from(s.as_bytes());\n\n    assert_eq!(bytes.len(), READ_INCREMENT - 2);\n\n    // Add a 4-byte UTF-8 sequence\n    bytes.push(0xF0);\n    bytes.push(0x90);\n    bytes.push(0x80);\n    bytes.push(0x80);\n\n    assert_eq!(bytes.len(), READ_INCREMENT + 2);\n\n    bytes.push(b'a');\n\n    assert_eq!(bytes.len(), READ_INCREMENT + 3);\n\n    let bytes_reader = std::io::Cursor::new(bytes);\n\n    let mut unit = Unit::new(\"test\".to_string(), 0, Box::new(bytes_reader));\n\n    for i in 0..(READ_INCREMENT - 2) {\n        println!(\"{:x}\", i);\n        assert_eq!(unit.read(), Some('a'));\n    }\n\n    let c = unit.read().unwrap();\n\n    assert_eq!(c.len_utf8(), 4);\n\n    dbg!(\u0026unit);\n\n    assert_eq!(unit.read(), Some('a'));\n}\n\n#[test]\n#[should_panic(expected = \"Invalid UTF-8 sequence at end of file\")]\nfn utf8_misalignment_end() {\n    let mut s = String::new();\n    for _ in 0..(READ_INCREMENT - 2) {\n        s.push('a');\n    }\n\n    let mut bytes = Vec::from(s.as_bytes());\n\n    assert_eq!(bytes.len(), READ_INCREMENT - 2);\n\n    // Add a 4-byte UTF-8 sequence\n    bytes.push(0xF0);\n    bytes.push(0x90);\n\n    assert_eq!(bytes.len(), READ_INCREMENT);\n\n    let bytes_reader = std::io::Cursor::new(bytes);\n\n    let mut unit = Unit::new(\"test\".to_string(), 0, Box::new(bytes_reader));\n\n    for i in 0..(READ_INCREMENT - 2) {\n        println!(\"{:x}\", i);\n        assert_eq!(unit.read(), Some('a'));\n    }\n\n    let _ = unit.read();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","tokens.rs"],"content":"use std::{fmt::Display, hash::Hash};\n\nuse crate::unit::Span;\n\n#[derive(Debug, Clone, PartialEq, Hash)]\npub struct Token {\n    pub kind: TokenKind,\n    pub span: Option\u003cSpan\u003e,\n}\n\nimpl Token {\n    pub fn new(kind: TokenKind, span: Option\u003cSpan\u003e) -\u003e Self {\n        Self { kind, span }\n    }\n}\n\nimpl Display for Token {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self.span {\n            Some(span) =\u003e write!(f, \"[ {} ] {}\", self.kind, span),\n            None =\u003e write!(f, \"[ {} ]\", self.kind),\n        }\n    }\n}\n\n#[derive(Debug, Clone)]\npub enum TokenKind {\n    // Single-character tokens.\n    LeftParen,\n    RightParen,\n    LeftBrace,\n    RightBrace,\n    LeftBracket,\n    RightBracket,\n    Comma,\n    Dot,\n    Plus,\n    Semicolon,\n    Slash,\n    Star,\n    Pipe,\n    Question,\n\n    // One or two character tokens.\n    Colon,\n    DoubleColon,\n    Minus,\n    Arrow,\n    Bang,\n    BangEqual,\n    Equal,\n    EqualEqual,\n    Greater,\n    GreaterEqual,\n    Less,\n    LessEqual,\n\n    // Literals.\n    Identifier(String),\n    String(String),\n    Char(char),\n    Integer(u64),\n    Float(f64),\n\n    // Keywords.\n    Pub,\n    Mod,\n    Fn,\n    Type,\n    Trait,\n    Impl,\n    Var,\n    And,\n    Or,\n    For,\n    In,\n    If,\n    Else,\n    Match,\n    On,\n    While,\n    Break,\n    Continue,\n    Return,\n    True,\n    False,\n    Void,\n\n    Eof,\n    Comment(String),\n}\n\nimpl Display for TokenKind {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            TokenKind::LeftParen =\u003e write!(f, \"(\"),\n            TokenKind::RightParen =\u003e write!(f, \")\"),\n            TokenKind::LeftBrace =\u003e write!(f, \"{{\"),\n            TokenKind::RightBrace =\u003e write!(f, \"}}\"),\n            TokenKind::LeftBracket =\u003e write!(f, \"[\"),\n            TokenKind::RightBracket =\u003e write!(f, \"]\"),\n            TokenKind::Comma =\u003e write!(f, \",\"),\n            TokenKind::Dot =\u003e write!(f, \".\"),\n            TokenKind::Plus =\u003e write!(f, \"+\"),\n            TokenKind::Semicolon =\u003e write!(f, \";\"),\n            TokenKind::Slash =\u003e write!(f, \"/\"),\n            TokenKind::Star =\u003e write!(f, \"*\"),\n            TokenKind::Pipe =\u003e write!(f, \"|\"),\n            TokenKind::Question =\u003e write!(f, \"?\"),\n            TokenKind::Colon =\u003e write!(f, \":\"),\n            TokenKind::DoubleColon =\u003e write!(f, \"::\"),\n            TokenKind::Minus =\u003e write!(f, \"-\"),\n            TokenKind::Arrow =\u003e write!(f, \"-\u003e\"),\n            TokenKind::Bang =\u003e write!(f, \"!\"),\n            TokenKind::BangEqual =\u003e write!(f, \"!=\"),\n            TokenKind::Equal =\u003e write!(f, \"=\"),\n            TokenKind::EqualEqual =\u003e write!(f, \"==\"),\n            TokenKind::Greater =\u003e write!(f, \"\u003e\"),\n            TokenKind::GreaterEqual =\u003e write!(f, \"\u003e=\"),\n            TokenKind::Less =\u003e write!(f, \"\u003c\"),\n            TokenKind::LessEqual =\u003e write!(f, \"\u003c=\"),\n            TokenKind::Identifier(s) =\u003e write!(f, \"ident: {s}\"),\n            TokenKind::String(s) =\u003e write!(f, \"\\\"{s}\\\"\"),\n            TokenKind::Char(c) =\u003e write!(f, \"'{c}'\"),\n            TokenKind::Integer(n) =\u003e write!(f, \"{n}\"),\n            TokenKind::Float(n) =\u003e write!(f, \"{n}\"),\n            TokenKind::Pub =\u003e write!(f, \"pub\"),\n            TokenKind::Mod =\u003e write!(f, \"mod\"),\n            TokenKind::Fn =\u003e write!(f, \"fn\"),\n            TokenKind::Type =\u003e write!(f, \"type\"),\n            TokenKind::Trait =\u003e write!(f, \"trait\"),\n            TokenKind::Impl =\u003e write!(f, \"impl\"),\n            TokenKind::Var =\u003e write!(f, \"var\"),\n            TokenKind::And =\u003e write!(f, \"and\"),\n            TokenKind::Or =\u003e write!(f, \"or\"),\n            TokenKind::For =\u003e write!(f, \"for\"),\n            TokenKind::In =\u003e write!(f, \"in\"),\n            TokenKind::If =\u003e write!(f, \"if\"),\n            TokenKind::Else =\u003e write!(f, \"else\"),\n            TokenKind::Match =\u003e write!(f, \"match\"),\n            TokenKind::On =\u003e write!(f, \"on\"),\n            TokenKind::While =\u003e write!(f, \"while\"),\n            TokenKind::Break =\u003e write!(f, \"break\"),\n            TokenKind::Continue =\u003e write!(f, \"continue\"),\n            TokenKind::Return =\u003e write!(f, \"return\"),\n            TokenKind::True =\u003e write!(f, \"true\"),\n            TokenKind::False =\u003e write!(f, \"false\"),\n            TokenKind::Void =\u003e write!(f, \"void\"),\n            TokenKind::Eof =\u003e write!(f, \"EOF\"),\n            TokenKind::Comment(s) =\u003e write!(f, \"#{s}\"),\n        }\n    }\n}\n\nimpl PartialEq for TokenKind {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        match (self, other) {\n            (TokenKind::Identifier(s1), TokenKind::Identifier(s2)) =\u003e s1 == s2,\n            (TokenKind::String(s1), TokenKind::String(s2)) =\u003e s1 == s2,\n            (TokenKind::Integer(n1), TokenKind::Integer(n2)) =\u003e n1 == n2,\n            (TokenKind::Float(n1), TokenKind::Float(n2)) =\u003e {\n                n1 == n2\n                    || (n1.is_nan() \u0026\u0026 n2.is_nan())\n                    || (n1.is_infinite() \u0026\u0026 n2.is_infinite())\n                    // This works relaiably enough for relative precision\n                    || (n1 - n2).abs() \u003c= f64::EPSILON * f64::max(n1.abs(), n2.abs())\n            }\n            (TokenKind::Comment(s1), TokenKind::Comment(s2)) =\u003e s1 == s2,\n            _ =\u003e std::mem::discriminant(self) == std::mem::discriminant(other),\n        }\n    }\n}\n\nimpl Hash for TokenKind {\n    fn hash\u003cH: std::hash::Hasher\u003e(\u0026self, state: \u0026mut H) {\n        std::mem::discriminant(self).hash(state);\n        match self {\n            TokenKind::Identifier(s) =\u003e s.hash(state),\n            TokenKind::String(s) =\u003e s.hash(state),\n            TokenKind::Integer(n) =\u003e n.hash(state),\n            TokenKind::Float(n) =\u003e n.to_bits().hash(state),\n            TokenKind::Comment(s) =\u003e s.hash(state),\n            _ =\u003e {}\n        }\n    }\n}\n","traces":[{"line":12,"address":[394656],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":18,"address":[394800],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":19,"address":[394833],"length":1,"stats":{"Line":0},"fn_name":null},{"line":20,"address":[394943],"length":1,"stats":{"Line":0},"fn_name":null},{"line":21,"address":[394844],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[395120],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":95,"address":[395153],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[395183],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[395244],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[395305],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[395372],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[395439],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[395506],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[395573],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[395640],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[395707],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[395774],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[395841],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[395908],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[395975],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[396042],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[396109],"length":1,"stats":{"Line":0},"fn_name":null},{"line":111,"address":[396176],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[396243],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[396310],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[396377],"length":1,"stats":{"Line":0},"fn_name":null},{"line":115,"address":[396444],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[396511],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[396578],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[396645],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[396712],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[396779],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[396846],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[396918],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[397031],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[397146],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[397261],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[397374],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[397482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[397549],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[397616],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[397683],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[397750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[397817],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[397884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[397951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[398018],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[398085],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[398152],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[398219],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[398286],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[398353],"length":1,"stats":{"Line":0},"fn_name":null},{"line":141,"address":[398420],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[398487],"length":1,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[398554],"length":1,"stats":{"Line":0},"fn_name":null},{"line":144,"address":[398621],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[398688],"length":1,"stats":{"Line":0},"fn_name":null},{"line":146,"address":[398755],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[398822],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[398889],"length":1,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[398956],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[399025],"length":1,"stats":{"Line":0},"fn_name":null},{"line":156,"address":[399152],"length":1,"stats":{"Line":1},"fn_name":"eq"},{"line":157,"address":[399185,399306],"length":1,"stats":{"Line":2},"fn_name":null},{"line":158,"address":[399938],"length":1,"stats":{"Line":2},"fn_name":null},{"line":159,"address":[399884],"length":1,"stats":{"Line":2},"fn_name":null},{"line":160,"address":[399830],"length":1,"stats":{"Line":1},"fn_name":null},{"line":161,"address":[399476],"length":1,"stats":{"Line":2},"fn_name":null},{"line":162,"address":[399543,399596,399691,399634,399504,399809],"length":1,"stats":{"Line":10},"fn_name":null},{"line":163,"address":[399563,399523],"length":1,"stats":{"Line":4},"fn_name":null},{"line":164,"address":[399614,399658],"length":1,"stats":{"Line":3},"fn_name":null},{"line":166,"address":[399709],"length":1,"stats":{"Line":2},"fn_name":null},{"line":168,"address":[399398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":169,"address":[399243],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":178,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":180,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":181,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":183,"address":[],"length":0,"stats":{"Line":0},"fn_name":null}],"covered":13,"coverable":83},{"path":["/","home","duckonaut","repos","brakion","brakion-core","src","unit.rs"],"content":"use std::{\n    fmt::Display,\n    hash::Hash,\n    io::{Read, Seek},\n};\n\npub(crate) const READ_INCREMENT: usize = 0x1000; // 4 KiB, default Linux page size\n\npub trait ReadSeek: Read + Seek {} // Helper trait to allow for dynamic dispatch\nimpl\u003cT: Read + Seek\u003e ReadSeek for T {}\n\npub type UnitIdentifier = usize; // Key into the `units` map\npub type Units = Vec\u003cUnit\u003e;\n\n/// A unit is a source file that is being compiled.\n/// It is a wrapper around a `Read`-implementing struct that provides\n/// a buffer of the source code, lazy loading it as needed.\npub struct Unit {\n    pub name: String,\n    pub id: UnitIdentifier, // Kept here for convenience\n    code: String,\n    code_len_bytes: usize,\n    source: Box\u003cdyn ReadSeek\u003e,\n    is_at_end: bool,\n    read_pos_bytes: usize,\n    debt: usize,\n}\n\nimpl std::fmt::Debug for Unit {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        f.debug_struct(\"Unit\")\n            .field(\"name\", \u0026self.name)\n            .field(\"id\", \u0026self.id)\n            .field(\"code\", \u0026self.code)\n            .field(\"code_len\", \u0026self.code_len_bytes)\n            .field(\"source\", \u0026\"Box\u003cdyn Read\u003e\")\n            .field(\"is_at_end\", \u0026self.is_at_end)\n            .field(\"read_pos_bytes\", \u0026self.read_pos_bytes)\n            .field(\"debt\", \u0026self.debt)\n            .finish()\n    }\n}\n\nimpl Unit {\n    pub fn new(name: String, id: UnitIdentifier, source: Box\u003cdyn ReadSeek\u003e) -\u003e Self {\n        Self {\n            name,\n            id,\n            code: String::new(),\n            code_len_bytes: 0,\n            source,\n            is_at_end: false,\n            read_pos_bytes: 0,\n            debt: 0,\n        }\n    }\n\n    pub fn name(\u0026self) -\u003e \u0026str {\n        \u0026self.name\n    }\n\n    /// Returns true if the unit has reached the end of the source code.\n    pub fn is_at_end(\u0026self) -\u003e bool {\n        self.is_at_end\n    }\n\n    /// Returns the next character in the source code.\n    /// If the end of the source code has been reached, returns `None`.\n    /// If the end of the buffer has been reached, loads more source code.\n    pub fn read(\u0026mut self) -\u003e Option\u003cchar\u003e {\n        if self.is_at_end {\n            return None;\n        }\n\n        if self.read_pos_bytes \u003e= self.code_len_bytes \u0026\u0026 self.advance_buffer() == 0 {\n            return None;\n        }\n\n        let c = self\n            .code\n            .get(self.read_pos_bytes..)\n            .unwrap() // Safe because we checked that the buffer is not empty\n            .chars()\n            .next()\n            .unwrap(); // Safe because we checked that the buffer is utf8 and not empty\n        self.read_pos_bytes += c.len_utf8(); // Move to next character\n        Some(c)\n    }\n\n    fn advance_buffer(\u0026mut self) -\u003e usize {\n        let source = \u0026mut self.source;\n        let mut buffer = [0; READ_INCREMENT];\n\n        if self.debt \u003e 0 {\n            source\n                .seek(std::io::SeekFrom::Current(-(self.debt as i64)))\n                .unwrap();\n\n            self.debt = 0;\n        }\n\n        let read = source.read(\u0026mut buffer).unwrap();\n        if read == 0 {\n            self.is_at_end = true;\n            return 0;\n        }\n\n        let (decoded, debt) = Self::utf8_safe_read(\u0026buffer[..read], \u0026mut *source);\n        self.code.clear();\n        self.read_pos_bytes = 0;\n\n        self.code.push_str(decoded);\n        self.code_len_bytes = self.code.len();\n        self.debt = debt;\n        read\n    }\n\n    // Returns up to `N` characters from the source code, and the debt amount. If at the end of\n    // source code, panics. TODO: Maybe not panic?\n    fn utf8_safe_read\u003c'a\u003e(buffer: \u0026'a [u8], source: \u0026mut dyn ReadSeek) -\u003e (\u0026'a str, usize) {\n        match std::str::from_utf8(buffer) {\n            Ok(s) =\u003e (s, 0),\n            Err(e) =\u003e match e.error_len() {\n                // panic if invalid utf8 in the middle of the file\n                Some(_) =\u003e panic!(\"Invalid UTF-8 sequence in source code\"),\n                None =\u003e {\n                    let current_pos = source.stream_position().unwrap();\n\n                    let end_pos = source.seek(std::io::SeekFrom::End(0)).unwrap();\n\n                    let source_has_anything_left = current_pos \u003c end_pos;\n\n                    // Restore the position of the source\n                    source.seek(std::io::SeekFrom::Start(current_pos)).unwrap();\n\n                    if !source_has_anything_left {\n                        panic!(\"Invalid UTF-8 sequence at end of file\");\n                    }\n\n                    (\n                        std::str::from_utf8(\u0026buffer[..e.valid_up_to()]).unwrap(),\n                        buffer.len() - e.valid_up_to(),\n                    )\n                }\n            },\n        }\n    }\n\n    pub fn lines(\u0026mut self, span: \u0026Span) -\u003e Vec\u003cString\u003e {\n        assert!(\n            span.unit == self.id,\n            \"Tried to get lines from a different unit\"\n        );\n\n        let start_line_byte_pos = span.start.line_start;\n        let end_line_byte_pos = span.end.line_start;\n        let min_bytes_to_read = end_line_byte_pos - start_line_byte_pos;\n\n        let mut lines = String::new();\n\n        let source = \u0026mut self.source;\n        let original_pos = source.stream_position().unwrap();\n\n        source\n            .seek(std::io::SeekFrom::Start(start_line_byte_pos as u64))\n            .unwrap();\n\n        let mut buffer = [0; READ_INCREMENT];\n        let mut bytes_read = 0;\n\n        while bytes_read \u003c min_bytes_to_read {\n            let read = source.read(\u0026mut buffer).unwrap();\n            if read == 0 {\n                break;\n            }\n\n            let (s, debt) = Self::utf8_safe_read(\u0026buffer[..read], \u0026mut *source);\n\n            if debt \u003e 0 {\n                source\n                    .seek(std::io::SeekFrom::Current(-(debt as i64)))\n                    .unwrap();\n            }\n\n            lines.push_str(s);\n            bytes_read += read - debt;\n        }\n\n        if bytes_read \u003c min_bytes_to_read {\n            panic!(\"Unexpected end of file\");\n        }\n\n        let last_end = lines.rfind('\\n');\n\n        if last_end.is_none() || (last_end.is_some() \u0026\u0026 last_end.unwrap() \u003c end_line_byte_pos) {\n            // The last line is not complete, so we need to read more. No need to go overboard\n            // though, if there's nothing left in the file, we'll just return what we have.\n            // If there's more than READ_INCREMENT bytes left, or if there's some debt, we'll\n            // just return whatever we get.\n            buffer = [0; READ_INCREMENT];\n            let read = source.read(\u0026mut buffer).unwrap();\n\n            if read == 0 {\n                return lines\n                    .lines()\n                    .map(|s| s.to_string())\n                    .collect::\u003cVec\u003cString\u003e\u003e();\n            }\n\n            let (s, _) = Self::utf8_safe_read(\u0026buffer[..read], \u0026mut *source);\n\n            let newline_pos = s.find('\\n');\n\n            if let Some(newline_pos) = newline_pos {\n                lines.push_str(\u0026s[..newline_pos]);\n            } else {\n                lines.push_str(s);\n            }\n        }\n\n        source.seek(std::io::SeekFrom::Start(original_pos)).unwrap();\n\n        lines\n            .lines()\n            .map(|s| s.to_string())\n            .collect::\u003cVec\u003cString\u003e\u003e()\n    }\n}\n\nimpl PartialEq for Unit {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        self.name == other.name\n    }\n}\n\nimpl Hash for Unit {\n    fn hash\u003cH: std::hash::Hasher\u003e(\u0026self, state: \u0026mut H) {\n        self.name.hash(state);\n    }\n}\n\n#[derive(Debug, Copy, PartialEq, Hash)]\npub struct Span {\n    pub unit: UnitIdentifier,\n    pub start: Location,\n    pub end: Location,\n}\n\nimpl Span {\n    pub fn new(unit: UnitIdentifier, start: Location, end: Location) -\u003e Self {\n        Self { unit, start, end }\n    }\n\n    pub fn from_spans(start: Span, end: Span) -\u003e Self {\n        assert_eq!(start.unit, end.unit);\n\n        Self {\n            unit: start.unit,\n            start: start.start,\n            end: end.end,\n        }\n    }\n\n    pub fn is_in_span(\u0026self, line: usize, column: usize) -\u003e bool {\n        (line \u003e self.start.line || (line == self.start.line \u0026\u0026 column \u003e= self.start.column))\n            \u0026\u0026 (line \u003c self.end.line || (line == self.end.line \u0026\u0026 column \u003c= self.end.column))\n    }\n}\n\nimpl Display for Span {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        write!(f, \"{}-{}\", self.start, self.end)\n    }\n}\n\nimpl Clone for Span {\n    fn clone(\u0026self) -\u003e Self {\n        Self {\n            unit: self.unit,\n            start: self.start,\n            end: self.end,\n        }\n    }\n}\n\n#[derive(Debug, Copy, Clone, PartialEq, Eq, Hash)]\npub struct Location {\n    pub line: usize,\n    pub line_start: usize,\n    pub column: usize,\n}\n\nimpl Location {\n    pub fn new(line: usize, line_start: usize, column: usize) -\u003e Self {\n        Self {\n            line,\n            line_start,\n            column,\n        }\n    }\n}\n\nimpl Display for Location {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        write!(f, \"{}:{}\", self.line, self.column)\n    }\n}\n\nimpl PartialOrd for Location {\n    fn partial_cmp(\u0026self, other: \u0026Self) -\u003e Option\u003cstd::cmp::Ordering\u003e {\n        Some(self.cmp(other))\n    }\n}\n\nimpl Ord for Location {\n    fn cmp(\u0026self, other: \u0026Self) -\u003e std::cmp::Ordering {\n        self.line\n            .cmp(\u0026other.line)\n            .then(self.column.cmp(\u0026other.column))\n    }\n}\n","traces":[{"line":30,"address":[309840],"length":1,"stats":{"Line":1},"fn_name":"fmt"},{"line":31,"address":[309889,310145,309858,309966,310109,309930,310002,310073],"length":1,"stats":{"Line":8},"fn_name":null},{"line":32,"address":[309885],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[309926],"length":1,"stats":{"Line":1},"fn_name":null},{"line":34,"address":[309962],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[309998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[310069],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[310105],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[310141],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[310192,310413,310436],"length":1,"stats":{"Line":12},"fn_name":"new"},{"line":49,"address":[310248],"length":1,"stats":{"Line":10},"fn_name":null},{"line":58,"address":[310448],"length":1,"stats":{"Line":0},"fn_name":"name"},{"line":59,"address":[310453],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[310464],"length":1,"stats":{"Line":0},"fn_name":"is_at_end"},{"line":64,"address":[310469],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[310480],"length":1,"stats":{"Line":1},"fn_name":"read"},{"line":71,"address":[310494],"length":1,"stats":{"Line":10},"fn_name":null},{"line":72,"address":[310517],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[310534,310505],"length":1,"stats":{"Line":2},"fn_name":null},{"line":76,"address":[310720],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[310609,310580],"length":1,"stats":{"Line":18},"fn_name":null},{"line":81,"address":[310600],"length":1,"stats":{"Line":2},"fn_name":null},{"line":86,"address":[310692,310747,310760],"length":1,"stats":{"Line":11},"fn_name":null},{"line":87,"address":[310751],"length":1,"stats":{"Line":2},"fn_name":null},{"line":90,"address":[310800],"length":1,"stats":{"Line":11},"fn_name":"advance_buffer"},{"line":91,"address":[310826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":92,"address":[310834],"length":1,"stats":{"Line":10},"fn_name":null},{"line":94,"address":[311062,310856],"length":1,"stats":{"Line":2},"fn_name":null},{"line":95,"address":[311008],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[311067,310944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":99,"address":[311054],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[310868],"length":1,"stats":{"Line":11},"fn_name":null},{"line":103,"address":[310924],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[311102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[311106],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[311125],"length":1,"stats":{"Line":9},"fn_name":null},{"line":109,"address":[311253],"length":1,"stats":{"Line":9},"fn_name":null},{"line":110,"address":[311276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":112,"address":[311284],"length":1,"stats":{"Line":9},"fn_name":null},{"line":113,"address":[311298],"length":1,"stats":{"Line":2},"fn_name":null},{"line":114,"address":[311329],"length":1,"stats":{"Line":9},"fn_name":null},{"line":115,"address":[311333],"length":1,"stats":{"Line":2},"fn_name":null},{"line":120,"address":[311360],"length":1,"stats":{"Line":1},"fn_name":"utf8_safe_read"},{"line":121,"address":[311429],"length":1,"stats":{"Line":10},"fn_name":null},{"line":122,"address":[311453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[311499],"length":1,"stats":{"Line":2},"fn_name":null},{"line":125,"address":[311807],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[311566],"length":1,"stats":{"Line":2},"fn_name":null},{"line":129,"address":[311623],"length":1,"stats":{"Line":2},"fn_name":null},{"line":131,"address":[311712],"length":1,"stats":{"Line":2},"fn_name":null},{"line":134,"address":[311732],"length":1,"stats":{"Line":2},"fn_name":null},{"line":136,"address":[311795],"length":1,"stats":{"Line":2},"fn_name":null},{"line":137,"address":[312014],"length":1,"stats":{"Line":1},"fn_name":null},{"line":141,"address":[311872],"length":1,"stats":{"Line":1},"fn_name":null},{"line":142,"address":[311970,312110],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[312160,314460],"length":1,"stats":{"Line":0},"fn_name":"lines"},{"line":150,"address":[312315,312231],"length":1,"stats":{"Line":0},"fn_name":null},{"line":151,"address":[312221],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[312245],"length":1,"stats":{"Line":0},"fn_name":null},{"line":156,"address":[312265],"length":1,"stats":{"Line":0},"fn_name":null},{"line":157,"address":[312394,312446,312285],"length":1,"stats":{"Line":0},"fn_name":null},{"line":159,"address":[312410],"length":1,"stats":{"Line":0},"fn_name":null},{"line":161,"address":[312423],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[312520,312439],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[312618],"length":1,"stats":{"Line":0},"fn_name":null},{"line":165,"address":[312582],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[312647],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[312667],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[312687,313303],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[312753],"length":1,"stats":{"Line":0},"fn_name":null},{"line":173,"address":[312806],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[312820],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[312992],"length":1,"stats":{"Line":0},"fn_name":null},{"line":180,"address":[313154,313115],"length":1,"stats":{"Line":0},"fn_name":null},{"line":181,"address":[313040,313122],"length":1,"stats":{"Line":0},"fn_name":null},{"line":185,"address":[313022],"length":1,"stats":{"Line":0},"fn_name":null},{"line":186,"address":[313197,313308],"length":1,"stats":{"Line":0},"fn_name":null},{"line":189,"address":[312705],"length":1,"stats":{"Line":0},"fn_name":null},{"line":190,"address":[313372],"length":1,"stats":{"Line":0},"fn_name":null},{"line":193,"address":[313461,313349],"length":1,"stats":{"Line":0},"fn_name":null},{"line":195,"address":[313524],"length":1,"stats":{"Line":0},"fn_name":null},{"line":200,"address":[313795],"length":1,"stats":{"Line":0},"fn_name":null},{"line":201,"address":[313823],"length":1,"stats":{"Line":0},"fn_name":null},{"line":203,"address":[313870],"length":1,"stats":{"Line":0},"fn_name":null},{"line":204,"address":[313884,314242],"length":1,"stats":{"Line":0},"fn_name":null},{"line":206,"address":[318336,318389],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":210,"address":[313909],"length":1,"stats":{"Line":0},"fn_name":null},{"line":212,"address":[314044],"length":1,"stats":{"Line":0},"fn_name":null},{"line":214,"address":[314087],"length":1,"stats":{"Line":0},"fn_name":null},{"line":215,"address":[314124,314212],"length":1,"stats":{"Line":0},"fn_name":null},{"line":217,"address":[314182],"length":1,"stats":{"Line":0},"fn_name":null},{"line":221,"address":[314325,313717],"length":1,"stats":{"Line":0},"fn_name":null},{"line":223,"address":[314355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":225,"address":[318416,318469],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":231,"address":[314496],"length":1,"stats":{"Line":0},"fn_name":"eq"},{"line":232,"address":[314510],"length":1,"stats":{"Line":0},"fn_name":null},{"line":237,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":238,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":250,"address":[314544],"length":1,"stats":{"Line":7},"fn_name":"new"},{"line":254,"address":[314672],"length":1,"stats":{"Line":0},"fn_name":"from_spans"},{"line":255,"address":[314698,314944],"length":1,"stats":{"Line":0},"fn_name":null},{"line":258,"address":[314782],"length":1,"stats":{"Line":0},"fn_name":null},{"line":259,"address":[314785],"length":1,"stats":{"Line":0},"fn_name":null},{"line":260,"address":[314818],"length":1,"stats":{"Line":0},"fn_name":null},{"line":264,"address":[314992],"length":1,"stats":{"Line":0},"fn_name":"is_in_span"},{"line":265,"address":[315025,315147],"length":1,"stats":{"Line":0},"fn_name":null},{"line":266,"address":[315119,315159],"length":1,"stats":{"Line":0},"fn_name":null},{"line":271,"address":[315216],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":272,"address":[315246],"length":1,"stats":{"Line":0},"fn_name":null},{"line":277,"address":[315376],"length":1,"stats":{"Line":1},"fn_name":"clone"},{"line":279,"address":[315388],"length":1,"stats":{"Line":5},"fn_name":null},{"line":280,"address":[315391],"length":1,"stats":{"Line":1},"fn_name":null},{"line":281,"address":[315417],"length":1,"stats":{"Line":5},"fn_name":null},{"line":294,"address":[315520],"length":1,"stats":{"Line":5},"fn_name":"new"},{"line":304,"address":[315568],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":305,"address":[315598],"length":1,"stats":{"Line":0},"fn_name":null},{"line":310,"address":[315728],"length":1,"stats":{"Line":0},"fn_name":"partial_cmp"},{"line":311,"address":[315742],"length":1,"stats":{"Line":0},"fn_name":null},{"line":316,"address":[315760],"length":1,"stats":{"Line":0},"fn_name":"cmp"},{"line":317,"address":[315783,315818],"length":1,"stats":{"Line":0},"fn_name":null},{"line":319,"address":[315801],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":56,"coverable":122}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('div', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('pre', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>